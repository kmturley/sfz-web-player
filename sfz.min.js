/*! For license information please see sfz.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Sfz=t():e.Sfz=t()}(this,(()=>(()=>{var e={742:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),n=t[0],o=t[1];return 3*(n+o)/4-o},t.toByteArray=function(e){var t,n,a=c(e),i=a[0],s=a[1],l=new r(function(e,t,n){return 3*(t+n)/4-n}(0,i,s)),f=0,u=s>0?i-4:i;for(n=0;n<u;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],l[f++]=t>>16&255,l[f++]=t>>8&255,l[f++]=255&t;return 2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,l[f++]=255&t),1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,l[f++]=t>>8&255,l[f++]=255&t),l},t.fromByteArray=function(e){for(var t,o=e.length,r=o%3,a=[],i=16383,s=0,c=o-r;s<c;s+=i)a.push(l(e,s,s+i>c?c:s+i));return 1===r?(t=e[o-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[o-2]<<8)+e[o-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],o=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=a.length;i<s;++i)n[i]=a[i],o[a.charCodeAt(i)]=i;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,o){for(var r,a,i=[],s=t;s<o;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(a=r)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},764:(e,t,n)=>{"use strict";const o=n(742),r=n(645),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function s(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let o=s(n);const r=o.write(e,t);return r!==n&&(o=o.slice(0,r)),o}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return c.from(o,t,n);const r=function(e){if(c.isBuffer(e)){const t=0|g(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||W(e.length)?s(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return f(e),s(e<0?0:0|g(e))}function p(e){const t=e.length<0?0:0|g(e.length),n=s(t);for(let o=0;o<t;o+=1)n[o]=255&e[o];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let o;return o=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(o,c.prototype),o}function g(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function m(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(r)return o?-1:V(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,n){let o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return $(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function b(e,t,n){const o=e[t];e[t]=e[n],e[n]=o}function y(e,t,n,o,r){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),W(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=c.from(t,o)),c.isBuffer(t))return 0===t.length?-1:_(e,t,n,o,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,o,r);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,o,r){let a,i=1,s=e.length,c=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,n/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(r){let o=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===o?0:a-o)){if(-1===o&&(o=a),a-o+1===c)return o*i}else-1!==o&&(a-=a-o),o=-1}else for(n+c>s&&(n=s-c),a=n;a>=0;a--){let n=!0;for(let o=0;o<c;o++)if(l(e,a+o)!==l(t,o)){n=!1;break}if(n)return a}return-1}function x(e,t,n,o){n=Number(n)||0;const r=e.length-n;o?(o=Number(o))>r&&(o=r):o=r;const a=t.length;let i;for(o>a/2&&(o=a/2),i=0;i<o;++i){const o=parseInt(t.substr(2*i,2),16);if(W(o))return i;e[n+i]=o}return i}function v(e,t,n,o){return H(V(t,e.length-n),e,n,o)}function k(e,t,n,o){return H(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,o)}function w(e,t,n,o){return H(X(t),e,n,o)}function z(e,t,n,o){return H(function(e,t){let n,o,r;const a=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),o=n>>8,r=n%256,a.push(r),a.push(o);return a}(t,e.length-n),e,n,o)}function E(e,t,n){return 0===t&&n===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);const o=[];let r=t;for(;r<n;){const t=e[r];let a=null,i=t>239?4:t>223?3:t>191?2:1;if(r+i<=n){let n,o,s,c;switch(i){case 1:t<128&&(a=t);break;case 2:n=e[r+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(a=c));break;case 3:n=e[r+1],o=e[r+2],128==(192&n)&&128==(192&o)&&(c=(15&t)<<12|(63&n)<<6|63&o,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:n=e[r+1],o=e[r+2],s=e[r+3],128==(192&n)&&128==(192&o)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&o)<<6|63&s,c>65535&&c<1114112&&(a=c))}}null===a?(a=65533,i=1):a>65535&&(a-=65536,o.push(a>>>10&1023|55296),a=56320|1023&a),o.push(a),r+=i}return function(e){const t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);let n="",o=0;for(;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=N));return n}(o)}t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return f(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},c.allocUnsafe=function(e){return u(e)},c.allocUnsafeSlow=function(e){return u(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,o=t.length;for(let r=0,a=Math.min(n,o);r<a;++r)if(e[r]!==t[r]){n=e[r],o=t[r];break}return n<o?-1:o<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const o=c.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(Y(t,Uint8Array))r+t.length>o.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(o,r)):Uint8Array.prototype.set.call(o,t,r);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(o,r)}r+=t.length}return o},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):h.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(e,t,n,o,r){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===r&&(r=this.length),t<0||n>e.length||o<0||r>this.length)throw new RangeError("out of range index");if(o>=r&&t>=n)return 0;if(o>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(r>>>=0)-(o>>>=0),i=(n>>>=0)-(t>>>=0);const s=Math.min(a,i),l=this.slice(o,r),f=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==f[e]){a=l[e],i=f[e];break}return a<i?-1:i<a?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let a=!1;for(;;)switch(o){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":case"latin1":case"binary":return k(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const N=4096;function A(e,t,n){let o="";n=Math.min(e.length,n);for(let r=t;r<n;++r)o+=String.fromCharCode(127&e[r]);return o}function I(e,t,n){let o="";n=Math.min(e.length,n);for(let r=t;r<n;++r)o+=String.fromCharCode(e[r]);return o}function $(e,t,n){const o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);let r="";for(let o=t;o<n;++o)r+=Q[e[o]];return r}function F(e,t,n){const o=e.slice(t,n);let r="";for(let e=0;e<o.length-1;e+=2)r+=String.fromCharCode(o[e]+256*o[e+1]);return r}function C(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,o,r,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function O(e,t,n,o,r){M(t,o,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,n}function S(e,t,n,o,r){M(t,o,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let i=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=i,i>>=8,e[n+2]=i,i>>=8,e[n+1]=i,i>>=8,e[n]=i,n+8}function R(e,t,n,o,r,a){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(e,t,n,o,a){return t=+t,n>>>=0,a||R(e,0,n,4),r.write(e,t,n,o,23,4),n+4}function P(e,t,n,o,a){return t=+t,n>>>=0,a||R(e,0,n,8),r.write(e,t,n,o,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const o=this.subarray(e,t);return Object.setPrototypeOf(o,c.prototype),o},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);let o=this[e],r=1,a=0;for(;++a<t&&(r*=256);)o+=this[e+a]*r;return o},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);let o=this[e+--t],r=1;for(;t>0&&(r*=256);)o+=this[e+--t]*r;return o},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=Z((function(e){K(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||j(e,this.length-8);const o=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(o)+(BigInt(r)<<BigInt(32))})),c.prototype.readBigUInt64BE=Z((function(e){K(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||j(e,this.length-8);const o=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(o)<<BigInt(32))+BigInt(r)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);let o=this[e],r=1,a=0;for(;++a<t&&(r*=256);)o+=this[e+a]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||C(e,t,this.length);let o=t,r=1,a=this[e+--o];for(;o>0&&(r*=256);)a+=this[e+--o]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=Z((function(e){K(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||j(e,this.length-8);const o=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(o)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=Z((function(e){K(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||j(e,this.length-8);const o=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(o)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),r.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),r.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),r.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),r.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,o){e=+e,t>>>=0,n>>>=0,o||B(this,e,t,n,Math.pow(2,8*n)-1,0);let r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,o){e=+e,t>>>=0,n>>>=0,o||B(this,e,t,n,Math.pow(2,8*n)-1,0);let r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=Z((function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=Z((function(e,t=0){return S(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t>>>=0,!o){const o=Math.pow(2,8*n-1);B(this,e,t,n,o-1,-o)}let r=0,a=1,i=0;for(this[t]=255&e;++r<n&&(a*=256);)e<0&&0===i&&0!==this[t+r-1]&&(i=1),this[t+r]=(e/a>>0)-i&255;return t+n},c.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t>>>=0,!o){const o=Math.pow(2,8*n-1);B(this,e,t,n,o-1,-o)}let r=n-1,a=1,i=0;for(this[t+r]=255&e;--r>=0&&(a*=256);)e<0&&0===i&&0!==this[t+r+1]&&(i=1),this[t+r]=(e/a>>0)-i&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=Z((function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=Z((function(e,t=0){return S(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return D(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return D(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,o){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);const r=o-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),t),r},c.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){const t=e.charCodeAt(0);("utf8"===o&&t<128||"latin1"===o)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{const a=c.isBuffer(e)?e:c.from(e,o),i=a.length;if(0===i)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=a[r%i]}return this};const L={};function U(e,t,n){L[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",n=e.length;const o="-"===e[0]?1:0;for(;n>=o+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function M(e,t,n,o,r,a){if(e>n||e<t){const o="bigint"==typeof t?"n":"";let r;throw r=a>3?0===t||t===BigInt(0)?`>= 0${o} and < 2${o} ** ${8*(a+1)}${o}`:`>= -(2${o} ** ${8*(a+1)-1}${o}) and < 2 ** ${8*(a+1)-1}${o}`:`>= ${t}${o} and <= ${n}${o}`,new L.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){K(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||j(t,e.length-(n+1))}(o,r,a)}function K(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function j(e,t,n){if(Math.floor(e)!==e)throw K(e,n),new L.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}U("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),U("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),U("ERR_OUT_OF_RANGE",(function(e,t,n){let o=`The value of "${e}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=q(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=q(r)),r+="n"),o+=` It must be ${t}. Received ${r}`,o}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function V(e,t){let n;t=t||1/0;const o=e.length;let r=null;const a=[];for(let i=0;i<o;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===o){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function X(e){return o.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,o){let r;for(r=0;r<o&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!=e}const Q=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const o=16*n;for(let r=0;r<16;++r)t[o+r]=e[n]+e[r]}return t}();function Z(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}},624:e=>{function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},t.prototype.once=function(e,t){var n=this;function o(){n.off(e,o),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},o.fn=t,this.on(e,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,o=this._callbacks[e];if(!o)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r=0;r<o.length;r++)if((n=o[r])===t||n.fn===t){o.splice(r,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var o=0,r=(n=n.slice(0)).length;o<r;++o)n[o].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},645:(e,t)=>{t.read=function(e,t,n,o,r){var a,i,s=8*r-o-1,c=(1<<s)-1,l=c>>1,f=-7,u=n?r-1:0,p=n?-1:1,d=e[t+u];for(u+=p,a=d&(1<<-f)-1,d>>=-f,f+=s;f>0;a=256*a+e[t+u],u+=p,f-=8);for(i=a&(1<<-f)-1,a>>=-f,f+=o;f>0;i=256*i+e[t+u],u+=p,f-=8);if(0===a)a=1-l;else{if(a===c)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,o),a-=l}return(d?-1:1)*i*Math.pow(2,a-o)},t.write=function(e,t,n,o,r,a){var i,s,c,l=8*a-r-1,f=(1<<l)-1,u=f>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=o?0:a-1,g=o?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=f):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),(t+=i+u>=1?p/c:p*Math.pow(2,1-u))*c>=2&&(i++,c/=2),i+u>=f?(s=0,i=f):i+u>=1?(s=(t*c-1)*Math.pow(2,r),i+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,r),i=0));r>=8;e[n+d]=255&s,d+=g,s/=256,r-=8);for(i=i<<r|s,l+=r;l>0;e[n+d]=255&i,d+=g,i/=256,l-=8);e[n+d-g]|=128*m}},237:(e,t,n)=>{"use strict";n.r(t)},629:(e,t,n)=>{"use strict";n.r(t)},906:(e,t,n)=>{"use strict";n.r(t)},509:(e,t,n)=>{var o=n(764),r=o.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=o:(a(o,t),t.Buffer=i),i.prototype=Object.create(r.prototype),a(r,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=r(e);return void 0!==t?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},99:(e,t,n)=>{!function(e){e.parser=function(e,t){return new r(e,t)},e.SAXParser=r,e.SAXStream=i,e.createStream=function(e,t){return new i(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,o=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function r(t,n){if(!(this instanceof r))return new r(t,n);var a=this;!function(e){for(var t=0,n=o.length;t<n;t++)e[o[t]]=""}(a),a.q=a.c="",a.bufferCheckPosition=e.MAX_BUFFER_LENGTH,a.opt=n||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!t,a.noscript=!(!t&&!a.opt.noscript),a.state=z.BEGIN,a.strictEntities=a.opt.strictEntities,a.ENTITIES=a.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(u)),a.trackPosition=!1!==a.opt.position,a.trackPosition&&(a.position=a.line=a.column=0),T(a,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),r.prototype={end:function(){F(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return $(n,"Cannot write after close. Assign an onready handler.");if(null===t)return F(n);"object"==typeof t&&(t=t.toString());for(var r=0,a="";a=U(t,r++),n.c=a,a;)switch(n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++),n.state){case z.BEGIN:if(n.state=z.BEGIN_WHITESPACE,"\ufeff"===a)continue;L(n,a);continue;case z.BEGIN_WHITESPACE:L(n,a);continue;case z.TEXT:if(n.sawRoot&&!n.closedRoot){for(var i=r-1;a&&"<"!==a&&"&"!==a;)(a=U(t,r++))&&n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(i,r-1)}"<"!==a||n.sawRoot&&n.closedRoot&&!n.strict?(h(a)||n.sawRoot&&!n.closedRoot||C(n,"Text data outside of root node."),"&"===a?n.state=z.TEXT_ENTITY:n.textNode+=a):(n.state=z.OPEN_WAKA,n.startTagPosition=n.position);continue;case z.SCRIPT:"<"===a?n.state=z.SCRIPT_ENDING:n.script+=a;continue;case z.SCRIPT_ENDING:"/"===a?n.state=z.CLOSE_TAG:(n.script+="<"+a,n.state=z.SCRIPT);continue;case z.OPEN_WAKA:if("!"===a)n.state=z.SGML_DECL,n.sgmlDecl="";else if(h(a));else if(_(p,a))n.state=z.OPEN_TAG,n.tagName=a;else if("/"===a)n.state=z.CLOSE_TAG,n.tagName="";else if("?"===a)n.state=z.PROC_INST,n.procInstName=n.procInstBody="";else{if(C(n,"Unencoded <"),n.startTagPosition+1<n.position){var l=n.position-n.startTagPosition;a=new Array(l).join(" ")+a}n.textNode+="<"+a,n.state=z.TEXT}continue;case z.SGML_DECL:(n.sgmlDecl+a).toUpperCase()===s?(N(n,"onopencdata"),n.state=z.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+a==="--"?(n.state=z.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+a).toUpperCase()===c?(n.state=z.DOCTYPE,(n.doctype||n.sawRoot)&&C(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===a?(N(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=z.TEXT):b(a)?(n.state=z.SGML_DECL_QUOTED,n.sgmlDecl+=a):n.sgmlDecl+=a;continue;case z.SGML_DECL_QUOTED:a===n.q&&(n.state=z.SGML_DECL,n.q=""),n.sgmlDecl+=a;continue;case z.DOCTYPE:">"===a?(n.state=z.TEXT,N(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=a,"["===a?n.state=z.DOCTYPE_DTD:b(a)&&(n.state=z.DOCTYPE_QUOTED,n.q=a));continue;case z.DOCTYPE_QUOTED:n.doctype+=a,a===n.q&&(n.q="",n.state=z.DOCTYPE);continue;case z.DOCTYPE_DTD:n.doctype+=a,"]"===a?n.state=z.DOCTYPE:b(a)&&(n.state=z.DOCTYPE_DTD_QUOTED,n.q=a);continue;case z.DOCTYPE_DTD_QUOTED:n.doctype+=a,a===n.q&&(n.state=z.DOCTYPE_DTD,n.q="");continue;case z.COMMENT:"-"===a?n.state=z.COMMENT_ENDING:n.comment+=a;continue;case z.COMMENT_ENDING:"-"===a?(n.state=z.COMMENT_ENDED,n.comment=I(n.opt,n.comment),n.comment&&N(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+a,n.state=z.COMMENT);continue;case z.COMMENT_ENDED:">"!==a?(C(n,"Malformed comment"),n.comment+="--"+a,n.state=z.COMMENT):n.state=z.TEXT;continue;case z.CDATA:"]"===a?n.state=z.CDATA_ENDING:n.cdata+=a;continue;case z.CDATA_ENDING:"]"===a?n.state=z.CDATA_ENDING_2:(n.cdata+="]"+a,n.state=z.CDATA);continue;case z.CDATA_ENDING_2:">"===a?(n.cdata&&N(n,"oncdata",n.cdata),N(n,"onclosecdata"),n.cdata="",n.state=z.TEXT):"]"===a?n.cdata+="]":(n.cdata+="]]"+a,n.state=z.CDATA);continue;case z.PROC_INST:"?"===a?n.state=z.PROC_INST_ENDING:h(a)?n.state=z.PROC_INST_BODY:n.procInstName+=a;continue;case z.PROC_INST_BODY:if(!n.procInstBody&&h(a))continue;"?"===a?n.state=z.PROC_INST_ENDING:n.procInstBody+=a;continue;case z.PROC_INST_ENDING:">"===a?(N(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=z.TEXT):(n.procInstBody+="?"+a,n.state=z.PROC_INST_BODY);continue;case z.OPEN_TAG:_(d,a)?n.tagName+=a:(B(n),">"===a?R(n):"/"===a?n.state=z.OPEN_TAG_SLASH:(h(a)||C(n,"Invalid character in tag name"),n.state=z.ATTRIB));continue;case z.OPEN_TAG_SLASH:">"===a?(R(n,!0),D(n)):(C(n,"Forward-slash in opening tag not followed by >"),n.state=z.ATTRIB);continue;case z.ATTRIB:if(h(a))continue;">"===a?R(n):"/"===a?n.state=z.OPEN_TAG_SLASH:_(p,a)?(n.attribName=a,n.attribValue="",n.state=z.ATTRIB_NAME):C(n,"Invalid attribute name");continue;case z.ATTRIB_NAME:"="===a?n.state=z.ATTRIB_VALUE:">"===a?(C(n,"Attribute without value"),n.attribValue=n.attribName,S(n),R(n)):h(a)?n.state=z.ATTRIB_NAME_SAW_WHITE:_(d,a)?n.attribName+=a:C(n,"Invalid attribute name");continue;case z.ATTRIB_NAME_SAW_WHITE:if("="===a)n.state=z.ATTRIB_VALUE;else{if(h(a))continue;C(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",N(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===a?R(n):_(p,a)?(n.attribName=a,n.state=z.ATTRIB_NAME):(C(n,"Invalid attribute name"),n.state=z.ATTRIB)}continue;case z.ATTRIB_VALUE:if(h(a))continue;b(a)?(n.q=a,n.state=z.ATTRIB_VALUE_QUOTED):(C(n,"Unquoted attribute value"),n.state=z.ATTRIB_VALUE_UNQUOTED,n.attribValue=a);continue;case z.ATTRIB_VALUE_QUOTED:if(a!==n.q){"&"===a?n.state=z.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=a;continue}S(n),n.q="",n.state=z.ATTRIB_VALUE_CLOSED;continue;case z.ATTRIB_VALUE_CLOSED:h(a)?n.state=z.ATTRIB:">"===a?R(n):"/"===a?n.state=z.OPEN_TAG_SLASH:_(p,a)?(C(n,"No whitespace between attributes"),n.attribName=a,n.attribValue="",n.state=z.ATTRIB_NAME):C(n,"Invalid attribute name");continue;case z.ATTRIB_VALUE_UNQUOTED:if(!y(a)){"&"===a?n.state=z.ATTRIB_VALUE_ENTITY_U:n.attribValue+=a;continue}S(n),">"===a?R(n):n.state=z.ATTRIB;continue;case z.CLOSE_TAG:if(n.tagName)">"===a?D(n):_(d,a)?n.tagName+=a:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=z.SCRIPT):(h(a)||C(n,"Invalid tagname in closing tag"),n.state=z.CLOSE_TAG_SAW_WHITE);else{if(h(a))continue;x(p,a)?n.script?(n.script+="</"+a,n.state=z.SCRIPT):C(n,"Invalid tagname in closing tag."):n.tagName=a}continue;case z.CLOSE_TAG_SAW_WHITE:if(h(a))continue;">"===a?D(n):C(n,"Invalid characters in closing tag");continue;case z.TEXT_ENTITY:case z.ATTRIB_VALUE_ENTITY_Q:case z.ATTRIB_VALUE_ENTITY_U:var f,u;switch(n.state){case z.TEXT_ENTITY:f=z.TEXT,u="textNode";break;case z.ATTRIB_VALUE_ENTITY_Q:f=z.ATTRIB_VALUE_QUOTED,u="attribValue";break;case z.ATTRIB_VALUE_ENTITY_U:f=z.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===a?(n[u]+=P(n),n.entity="",n.state=f):_(n.entity.length?m:g,a)?n.entity+=a:(C(n,"Invalid character in entity name"),n[u]+="&"+n.entity+a,n.entity="",n.state=f);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),r=0,a=0,i=o.length;a<i;a++){var s=t[o[a]].length;if(s>n)switch(o[a]){case"textNode":A(t);break;case"cdata":N(t,"oncdata",t.cdata),t.cdata="";break;case"script":N(t,"onscript",t.script),t.script="";break;default:$(t,"Max buffer length exceeded: "+o[a])}r=Math.max(r,s)}var c=e.MAX_BUFFER_LENGTH-r;t.bufferCheckPosition=c+t.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;A(e=this),""!==e.cdata&&(N(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(N(e,"onscript",e.script),e.script="")}};try{t=n(86).Stream}catch(e){t=function(){}}var a=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function i(e,n){if(!(this instanceof i))return new i(e,n);t.apply(this),this._parser=new r(e,n),this.writable=!0,this.readable=!0;var o=this;this._parser.onend=function(){o.emit("end")},this._parser.onerror=function(e){o.emit("error",e),o._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(o,"on"+e,{get:function(){return o._parser["on"+e]},set:function(t){if(!t)return o.removeAllListeners(e),o._parser["on"+e]=t,t;o.on(e,t)},enumerable:!0,configurable:!1})}))}i.prototype=Object.create(t.prototype,{constructor:{value:i}}),i.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n(553).s;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},i.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},i.prototype.on=function(e,n){var o=this;return o._parser["on"+e]||-1===a.indexOf(e)||(o._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),o.emit.apply(o,t)}),t.prototype.on.call(o,e,n)};var s="[CDATA[",c="DOCTYPE",l="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",u={xml:l,xmlns:f},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function h(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function b(e){return'"'===e||"'"===e}function y(e){return">"===e||h(e)}function _(e,t){return e.test(t)}function x(e,t){return!_(e,t)}var v,k,w,z=0;for(var E in e.STATE={BEGIN:z++,BEGIN_WHITESPACE:z++,TEXT:z++,TEXT_ENTITY:z++,OPEN_WAKA:z++,SGML_DECL:z++,SGML_DECL_QUOTED:z++,DOCTYPE:z++,DOCTYPE_QUOTED:z++,DOCTYPE_DTD:z++,DOCTYPE_DTD_QUOTED:z++,COMMENT_STARTING:z++,COMMENT:z++,COMMENT_ENDING:z++,COMMENT_ENDED:z++,CDATA:z++,CDATA_ENDING:z++,CDATA_ENDING_2:z++,PROC_INST:z++,PROC_INST_BODY:z++,PROC_INST_ENDING:z++,OPEN_TAG:z++,OPEN_TAG_SLASH:z++,ATTRIB:z++,ATTRIB_NAME:z++,ATTRIB_NAME_SAW_WHITE:z++,ATTRIB_VALUE:z++,ATTRIB_VALUE_QUOTED:z++,ATTRIB_VALUE_CLOSED:z++,ATTRIB_VALUE_UNQUOTED:z++,ATTRIB_VALUE_ENTITY_Q:z++,ATTRIB_VALUE_ENTITY_U:z++,CLOSE_TAG:z++,CLOSE_TAG_SAW_WHITE:z++,SCRIPT:z++,SCRIPT_ENDING:z++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],o="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=o})),e.STATE)e.STATE[e.STATE[E]]=E;function T(e,t,n){e[t]&&e[t](n)}function N(e,t,n){e.textNode&&A(e),T(e,t,n)}function A(e){e.textNode=I(e.opt,e.textNode),e.textNode&&T(e,"ontext",e.textNode),e.textNode=""}function I(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function $(e,t){return A(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,T(e,"onerror",t),e}function F(e){return e.sawRoot&&!e.closedRoot&&C(e,"Unclosed root tag"),e.state!==z.BEGIN&&e.state!==z.BEGIN_WHITESPACE&&e.state!==z.TEXT&&$(e,"Unexpected end"),A(e),e.c="",e.closed=!0,T(e,"onend"),r.call(e,e.strict,e.opt),e}function C(e,t){if("object"!=typeof e||!(e instanceof r))throw new Error("bad call to strictFail");e.strict&&$(e,t)}function B(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,N(e,"onopentagstart",n)}function O(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),o=n[0],r=n[1];return t&&"xmlns"===e&&(o="xmlns",r=""),{prefix:o,local:r}}function S(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=O(e.attribName,!0),n=t.prefix,o=t.local;if("xmlns"===n)if("xml"===o&&e.attribValue!==l)C(e,"xml: prefix must be bound to "+l+"\nActual: "+e.attribValue);else if("xmlns"===o&&e.attribValue!==f)C(e,"xmlns: prefix must be bound to "+f+"\nActual: "+e.attribValue);else{var r=e.tag,a=e.tags[e.tags.length-1]||e;r.ns===a.ns&&(r.ns=Object.create(a.ns)),r.ns[o]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,N(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function R(e,t){if(e.opt.xmlns){var n=e.tag,o=O(e.tagName);n.prefix=o.prefix,n.local=o.local,n.uri=n.ns[o.prefix]||"",n.prefix&&!n.uri&&(C(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=o.prefix);var r=e.tags[e.tags.length-1]||e;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){N(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,i=e.attribList.length;a<i;a++){var s=e.attribList[a],c=s[0],l=s[1],f=O(c,!0),u=f.prefix,p=f.local,d=""===u?"":n.ns[u]||"",g={name:c,value:l,prefix:u,local:p,uri:d};u&&"xmlns"!==u&&!d&&(C(e,"Unbound namespace prefix: "+JSON.stringify(u)),g.uri=u),e.tag.attributes[c]=g,N(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),N(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=z.TEXT:e.state=z.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function D(e){if(!e.tagName)return C(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=z.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=z.SCRIPT);N(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var o=n;t--&&e.tags[t].name!==o;)C(e,"Unexpected close tag");if(t<0)return C(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=z.TEXT);e.tagName=n;for(var r=e.tags.length;r-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,N(e,"onclosetag",e.tagName);var i={};for(var s in a.ns)i[s]=a.ns[s];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==c.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];N(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=z.TEXT}function P(e){var t,n=e.entity,o=n.toLowerCase(),r="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[o]?e.ENTITIES[o]:("#"===(n=o).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),r=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),r=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||r.toLowerCase()!==n?(C(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function L(e,t){"<"===t?(e.state=z.OPEN_WAKA,e.startTagPosition=e.position):h(t)||(C(e,"Non-whitespace before first tag."),e.textNode=t,e.state=z.TEXT)}function U(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}z=e.STATE,String.fromCodePoint||(v=String.fromCharCode,k=Math.floor,w=function(){var e,t,n=[],o=-1,r=arguments.length;if(!r)return"";for(var a="";++o<r;){var i=Number(arguments[o]);if(!isFinite(i)||i<0||i>1114111||k(i)!==i)throw RangeError("Invalid code point: "+i);i<=65535?n.push(i):(e=55296+((i-=65536)>>10),t=i%1024+56320,n.push(e,t)),(o+1===r||n.length>16384)&&(a+=v.apply(null,n),n.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:w,configurable:!0,writable:!0}):String.fromCodePoint=w)}(t)},86:(e,t,n)=>{var o=n(624);function r(){o.call(this)}r.prototype=new o,e.exports=r,r.Stream=r,r.prototype.pipe=function(e,t){var n=this;function o(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",o),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",i),n.on("close",s));var a=!1;function i(){a||(a=!0,e.end())}function s(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(l(),!this.hasListeners("error"))throw e}function l(){n.off("data",o),e.off("drain",r),n.off("end",i),n.off("close",s),n.off("error",c),e.off("error",c),n.off("end",l),n.off("close",l),e.off("end",l),e.off("close",l)}return n.on("error",c),e.on("error",c),n.on("end",l),n.on("close",l),e.on("end",l),e.on("close",l),e.emit("pipe",n),e}},553:(e,t,n)=>{"use strict";var o=n(509).Buffer,r=o.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(o.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=f,this.end=u,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var o=n.charCodeAt(n.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}t.s=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var n=function(e,t,n){var o=t.length-1;if(o<n)return 0;var r=i(t[o]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--o<n||-2===r?0:(r=i(t[o]))>=0?(r>0&&(e.lastNeed=r-2),r):--o<n||-2===r?0:(r=i(t[o]))>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var o=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",t,o)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},860:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(385),a=n(617),i=n(855);class s extends r.default{constructor(e){if(super(),window.WebAudioTinySynth||window.alert("webaudio-tinysynth not found, add to a <script> tag."),this.synth=new window.WebAudioTinySynth({voices:16,useReverb:0,quality:1}),window.webAudioControlsWidgetManager||window.alert("webaudio-controls not found, add to a <script> tag."),window.webAudioControlsWidgetManager.addMidiListener((e=>this.onKeyboard(e))),this.loader=new a.default,(0,i.setParserLoader)(this.loader),e.root&&this.loader.setRoot(e.root),e.file){const t=this.loader.addFile(e.file);this.showFile(t)}}showFile(e){return o(this,void 0,void 0,(function*(){e=yield this.loader.getFile(e),console.log("showFile",e),console.log("parseSFZ",yield(0,i.parseSfz)(null==e?void 0:e.contents))}))}onKeyboard(e){const t={channel:144,note:e.data[1],velocity:128===e.data[0]?0:e.data[2]};this.setSynth(t),this.dispatchEvent("change",t)}setSynth(e){this.synth.send([e.channel,e.note,e.velocity])}}t.default=s},82:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),n(237);const r=n(334),a=n(617);class i extends r.default{constructor(e){if(super("editor"),window.ace||window.alert("Ace editor not found, add to a <script> tag."),this.fileEl=document.createElement("div"),this.fileEl.className="fileList",this.getEl().appendChild(this.fileEl),this.aceEl=document.createElement("div"),this.aceEl.className="ace",this.ace=window.ace.edit(this.aceEl,{theme:"ace/theme/monokai"}),this.getEl().appendChild(this.aceEl),e.loader?this.loader=e.loader:this.loader=new a.default,e.root&&this.loader.setRoot(e.root),e.directory&&(this.loader.addDirectory(e.directory),this.render()),e.file){const t=this.loader.addFile(e.file);this.showFile(t)}}showFile(e){return o(this,void 0,void 0,(function*(){if(e=yield this.loader.getFile(e)){if("sfz"===e.ext){const e=n(179).A;this.ace.session.setMode(new e)}else{const t=window.ace.require("ace/ext/modelist");t||window.alert("Ace modelist not found, add to a <script> tag.");const n=t.getModeForPath(e.path).mode;this.ace.session.setMode(n)}this.ace.setOption("value",e.contents)}}))}createTree(e,t,n){const r=document.createElement("ul");for(const a in n){let i=e+"/"+a;i.startsWith("/")&&(i=i.slice(1));const s=document.createElement("li");if(Object.keys(n[a]).length>0){const e=document.createElement("details"),r=document.createElement("summary");r.innerHTML=a,r.addEventListener("click",(()=>o(this,void 0,void 0,(function*(){yield this.showFile(t[i])})))),e.appendChild(r),e.appendChild(this.createTree(i,t,n[a])),s.appendChild(e)}else s.innerHTML=a,s.addEventListener("click",(()=>o(this,void 0,void 0,(function*(){yield this.showFile(t[i])}))));r.appendChild(s)}return r}render(){this.fileEl.replaceChildren(),this.fileEl.innerHTML=this.loader.root;const e=this.createTree("",this.loader.files,this.loader.filesTree);e.className="tree",this.fileEl.appendChild(e)}}t.default=i},802:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),n(629);const r=n(888),a=n(334),i=n(54),s=n(617);class c extends a.default{constructor(e){if(super("interface"),this.instrument={},this.tabs=document.createElement("div"),this.tabs.className="tabs",this.addTab("Info"),this.addTab("Controls"),this.getEl().appendChild(this.tabs),this.addKeyboard(),e.loader?this.loader=e.loader:this.loader=new s.default,e.root&&this.loader.setRoot(e.root),e.directory&&this.loader.addDirectory(e.directory),e.file){const t=this.loader.addFile(e.file);this.showFile(t)}}showFile(e){return o(this,void 0,void 0,(function*(){e=yield this.loader.getFile(e),this.instrument=this.parseXML(e),this.render()}))}render(){this.setupInfo(),this.setupControls()}addImage(e){return o(this,void 0,void 0,(function*(){const t=document.createElement("img");return t.setAttribute("draggable","false"),t.setAttribute("style",`left: ${e.x}px; top: ${e.y}px; height: ${e.h}px; width: ${e.w}px`),yield this.addImageAtr(t,"src",e.image),t}))}addImageAtr(e,t,n){return o(this,void 0,void 0,(function*(){if(this.loader.root.startsWith("http"))e.setAttribute(t,this.loader.root+"GUI/"+n);else{const o=this.loader.files["GUI/"+n];o&&"handle"in o&&e.setAttribute(t,URL.createObjectURL(o.handle))}}))}addControl(e,t){const n=document.createElement(`webaudio-${e}`);if("image"in t&&this.addImageAtr(n,"src",t.image),"image_bg"in t&&this.addImageAtr(n,"src",t.image_bg),"image_handle"in t&&this.addImageAtr(n,"knobsrc",t.image_handle),"frames"in t&&(n.setAttribute("value","0"),n.setAttribute("max",Number(t.frames)-1),n.setAttribute("step","1"),n.setAttribute("sprites",Number(t.frames)-1),n.setAttribute("tooltip","%d")),"orientation"in t){const e="vertical"===t.orientation?"vert":"horz";n.setAttribute("direction",e)}return"x"in t&&n.setAttribute("style",`left: ${t.x}px; top: ${t.y}px`),"w"in t&&(n.setAttribute("height",t.h),n.setAttribute("width",t.w)),n}addKeyboard(){const e=document.createElement("webaudio-keyboard");e.setAttribute("keys","88"),e.setAttribute("height","70"),e.setAttribute("width","775"),e.addEventListener("change",(e=>{const t={channel:144,note:e.note[1],velocity:e.note[0]?100:0};this.dispatchEvent("change",t)})),this.getEl().appendChild(e),this.keys=e}setKeyboard(e){this.keys.setNote(e.velocity,e.note)}addTab(e){const t=document.createElement("input");t.className="radiotab","Info"===e&&t.setAttribute("checked","checked"),t.type="radio",t.id=e.toLowerCase(),t.name="tabs",this.tabs.appendChild(t);const n=document.createElement("label");n.className="label",n.setAttribute("for",e.toLowerCase()),n.innerHTML=e,this.tabs.appendChild(n);const o=document.createElement("div");o.className="panel",this.tabs.appendChild(o)}addText(e){const t=document.createElement("span");return t.setAttribute("style",`left: ${e.x}px; top: ${e.y}px; color: ${e.color_text}; height: ${e.h}px; width: ${e.w}px`),t.innerHTML=e.text,t}parseXML(e){if(!e)return{};const t=(0,r.xml2js)(e.contents);return this.findElements({},t.elements)}setupInfo(){return o(this,void 0,void 0,(function*(){if(!this.instrument.AriaGUI)return;const e=this.tabs.getElementsByClassName("panel")[0];e.replaceChildren();const t=yield this.loader.getFile(this.loader.root+this.instrument.AriaGUI[0].path),n=yield this.parseXML(t);e.appendChild(yield this.addImage(n.StaticImage[0]))}))}setupControls(){return o(this,void 0,void 0,(function*(){if(!this.instrument.AriaProgram)return;const e=this.tabs.getElementsByClassName("panel")[1];e.replaceChildren();const t=yield this.loader.getFile(this.loader.root+this.instrument.AriaProgram[0].gui),n=yield this.parseXML(t);n.Knob&&n.Knob.forEach((t=>e.appendChild(this.addControl(i.PlayerElements.Knob,t)))),n.OnOffButton&&n.OnOffButton.forEach((t=>e.appendChild(this.addControl(i.PlayerElements.Switch,t)))),n.Slider&&n.Slider.forEach((t=>e.appendChild(this.addControl(i.PlayerElements.Slider,t)))),n.StaticImage&&n.StaticImage.forEach((t=>o(this,void 0,void 0,(function*(){return e.appendChild(yield this.addImage(t))})))),n.StaticText&&n.StaticText.forEach((t=>e.appendChild(this.addText(t))))}))}findElements(e,t){return t.forEach((t=>{"element"===t.type&&(e[t.name]||(e[t.name]=[]),e[t.name].push(t.attributes)),t.elements&&this.findElements(e,t.elements)})),e}}t.default=c},920:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(334),a=n(82),i=n(802);n(906);const s=n(434),c=n(974),l=n(617),f=n(860);class u extends r.default{constructor(e,t){var n;super("player"),this.loader=new l.default,t.audio&&this.setupAudio(t.audio),t.header&&this.setupHeader(),t.interface&&this.setupInterface(t.interface),t.editor&&this.setupEditor(t.editor),null===(n=document.getElementById(e))||void 0===n||n.appendChild(this.getEl())}setupAudio(e){e.loader=this.loader,this.audio=new f.default(e),this.audio.addEvent("change",(e=>{this.interface&&this.interface.setKeyboard(e.data)}))}setupInterface(e){e.loader=this.loader,this.interface=new i.default(e),this.interface.addEvent("change",(e=>{this.audio&&this.audio.setSynth(e.data)})),this.getEl().appendChild(this.interface.getEl())}setupEditor(e){e.loader=this.loader,this.editor=new a.default(e),this.getEl().appendChild(this.editor.getEl())}setupHeader(){const e=document.createElement("div");e.className="header";const t=document.createElement("input");t.type="button",t.value="Select directory",t.addEventListener("click",(e=>o(this,void 0,void 0,(function*(){try{const e=yield(0,s.directoryOpen)({recursive:!0});if(console.log(`${e.length} files selected.`),this.audio){let t;this.audio.loader.setRoot((0,c.pathRoot)(e[0].webkitRelativePath)+"Programs/"),this.audio.loader.addDirectory(e);for(const n of e)if("sfz"===(0,c.pathExt)(n.webkitRelativePath)){const e=this.audio.loader.addFile(n);t||(0,c.pathDir)(n.webkitRelativePath)!==this.audio.loader.root||(t=e)}yield this.audio.showFile(t)}if(this.interface){let t;this.interface.loader.setRoot((0,c.pathRoot)(e[0].webkitRelativePath)),this.interface.loader.addDirectory(e);for(const n of e)if("xml"===(0,c.pathExt)(n.webkitRelativePath)){const e=this.interface.loader.addFile(n);t||(0,c.pathDir)(n.webkitRelativePath)!==this.interface.loader.root||(t=e)}yield this.interface.showFile(t),this.interface.render()}this.editor&&(this.editor.loader.setRoot((0,c.pathRoot)(e[0].webkitRelativePath)),this.editor.loader.addDirectory(e),this.editor.render())}catch(e){if("AbortError"!==e.name)return console.error(e);console.log("The user aborted a request.")}})))),e.appendChild(t),this.getEl().appendChild(e)}}t.default=u},334:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(385);class r extends o.default{constructor(e){super(),this.el=document.createElement("div"),this.getEl().className=e}getEl(){return this.el}}t.default=r},385:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.events={}}addEvent(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}removeEvent(e,t){this.events[e]&&(t?this.events[e].forEach(((n,o)=>{if(n===t)return this.events[e].splice(o,1),!0})):delete this.events[e])}dispatchEvent(e,t){this.events[e]&&this.events[e].forEach((n=>{n({data:t,target:this,type:e})}))}}},54:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerElements=void 0,function(e){e.Keyboard="keyboard",e.Knob="knob",e.Slider="slider",e.Switch="switch"}(n||(n={})),t.PlayerElements=n},140:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getXML=t.getRaw=t.getJSON=t.get=void 0;const r=n(888);t.get=function(e){return o(this,void 0,void 0,(function*(){return console.log("⤓",e),fetch(e).then((e=>e.text()))}))},t.getJSON=function(e){return o(this,void 0,void 0,(function*(){return console.log("⤓",e),fetch(e).then((e=>e.json()))}))},t.getRaw=function(e){return o(this,void 0,void 0,(function*(){return console.log("⤓",e),fetch(e).then((e=>e.buffer()))}))},t.getXML=function(e){return o(this,void 0,void 0,(function*(){return console.log("⤓",e),fetch(e).then((e=>o(this,void 0,void 0,(function*(){return(0,r.xml2js)(yield e.text())}))))}))}},617:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(140),a=n(974);t.default=class{constructor(){this.files={},this.filesTree={},this.root=""}addDirectory(e){this.resetFiles(),e.forEach((e=>this.addFile(e)))}addFile(e){let t;if("string"==typeof e){if(e===this.root)return;t={ext:(0,a.pathExt)(e),contents:null,path:decodeURI(e)}}else t={ext:(0,a.pathExt)(e.webkitRelativePath),contents:null,path:decodeURI(e.webkitRelativePath),handle:e};const n=(0,a.pathSubDir)(t.path,this.root);return this.files[n]=t,n.split("/").reduce(((e,t)=>e[t]=e[t]||{}),this.filesTree),t}loadFile(e){return o(this,void 0,void 0,(function*(){return"string"==typeof e?{ext:(0,a.pathExt)(e),contents:yield(0,r.get)(e),path:decodeURI(e)}:{ext:(0,a.pathExt)(e.webkitRelativePath),contents:yield e.text(),path:e.webkitRelativePath}}))}getFile(e){return o(this,void 0,void 0,(function*(){if(e){if("string"==typeof e){const t=(0,a.pathSubDir)(e,this.root);e=this.files[t]?this.files[t]:yield this.loadFile(e)}if(!e.contents){const t=(0,a.pathSubDir)(e.path,this.root);"handle"in e?(e=yield this.loadFile(e.handle),this.files[t]=e):(e=yield this.loadFile(e.path),this.files[t]=e)}return e}}))}setRoot(e){this.root=e}resetFiles(){this.files={},this.filesTree={}}}},855:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};let o;Object.defineProperty(t,"__esModule",{value:!0}),t.setParserLoader=t.parseSfz=void 0;const r=[" ","\t","\r","\n"],a=[">","\r","\n"];function i(e,t){for(let n=t;n<e.length;n++){const t=e.charAt(n);if(a.includes(t))return n;if("/"===t&&"/"===e.charAt(n+1))return n}return e.length}t.parseSfz=function e(t){return n(this,void 0,void 0,(function*(){let n="";const a={};let s={};for(let c=0;c<t.length;c++){const l=t.charAt(c);if(r.includes(l))continue;const f=i(t,c);if("/"===l);else if("#"===l){const r=t.slice(c+10,f-1),i=yield o.getFile(o.root+r),s=yield e(null==i?void 0:i.contents),l=a[n];l[l.length-1]=Object.assign(Object.assign({},l[l.length-1]),s)}else if("<"===l)n=t.slice(c+1,f),s={},a[n]||(a[n]=[]),a[n].push(s);else{const e=t.slice(c,f),[n,o]=e.split("=");isNaN(o)?s[n]=o:s[n]=Number(o)}c=f}return n?a:s}))},t.setParserLoader=function(e){o=e}},974:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathSubDir=t.pathRoot=t.pathExt=t.pathDir=void 0,t.pathDir=function(e,t="/"){return e.substring(0,e.lastIndexOf(t)+1)},t.pathExt=function(e){return e.substring(e.lastIndexOf(".")+1)},t.pathRoot=function(e,t="/"){return e.substring(0,e.indexOf(t)+1)},t.pathSubDir=function(e,t){return e.substring(t.length)}},881:e=>{e.exports={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}}},888:(e,t,n)=>{var o=n(229),r=n(388),a=n(501),i=n(673);e.exports={xml2js:o,xml2json:r,js2xml:a,json2xml:i}},501:(e,t,n)=>{var o,r,a=n(740),i=n(881).isArray;function s(e,t,n){return(!n&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function c(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,r,o));var a,i,c,l,f=[];for(a in e)e.hasOwnProperty(a)&&null!==e[a]&&void 0!==e[a]&&(l=t.noQuotesForNativeAttributes&&"string"!=typeof e[a]?"":'"',i=(i=""+e[a]).replace(/"/g,"&quot;"),c="attributeNameFn"in t?t.attributeNameFn(a,i,r,o):a,f.push(t.spaces&&t.indentAttributes?s(t,n+1,!1):" "),f.push(c+"="+l+("attributeValueFn"in t?t.attributeValueFn(i,a,r,o):i)+l));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&f.push(s(t,n,!1)),f.join("")}function l(e,t,n){return o=e,r="xml",t.ignoreDeclaration?"":"<?xml"+c(e[t.attributesKey],t,n)+"?>"}function f(e,t,n){if(t.ignoreInstruction)return"";var a;for(a in e)if(e.hasOwnProperty(a))break;var i="instructionNameFn"in t?t.instructionNameFn(a,e[a],r,o):a;if("object"==typeof e[a])return o=e,r=i,"<?"+i+c(e[a][t.attributesKey],t,n)+"?>";var s=e[a]?e[a]:"";return"instructionFn"in t&&(s=t.instructionFn(s,a,r,o)),"<?"+i+(s?" "+s:"")+"?>"}function u(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,r,o):e)+"--\x3e"}function p(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,r,o):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function d(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,r,o):e)+">"}function g(e,t){return t.ignoreText?"":(e=(e=(e=""+e).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,r,o):e)}function m(e,t,n,a){return e.reduce((function(e,i){var l=s(t,n,a&&!e);switch(i.type){case"element":return e+l+function(e,t,n){o=e,r=e.name;var a=[],i="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;a.push("<"+i),e[t.attributesKey]&&a.push(c(e[t.attributesKey],t,n));var s=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&"preserve"===e[t.attributesKey]["xml:space"];return s||(s="fullTagEmptyElementFn"in t?t.fullTagEmptyElementFn(e.name,e):t.fullTagEmptyElement),s?(a.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(a.push(m(e[t.elementsKey],t,n+1)),o=e,r=e.name),a.push(t.spaces&&function(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;default:return!0}return!1}(e,t)?"\n"+Array(n+1).join(t.spaces):""),a.push("</"+i+">")):a.push("/>"),a.join("")}(i,t,n);case"comment":return e+l+u(i[t.commentKey],t);case"doctype":return e+l+d(i[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?l:"")+p(i[t.cdataKey],t);case"text":return e+(t.indentText?l:"")+g(i[t.textKey],t);case"instruction":var h={};return h[i[t.nameKey]]=i[t.attributesKey]?i:i[t.instructionKey],e+(t.indentInstruction?l:"")+f(h,t,n)}}),"")}function h(e,t,n){var o;for(o in e)if(e.hasOwnProperty(o))switch(o){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:default:return!0}return!1}function b(e,t,n,a,i){o=e,r=t;var l="elementNameFn"in n?n.elementNameFn(t,e):t;if(null==e||""===e)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+l+"></"+l+">":"<"+l+"/>";var f=[];if(t){if(f.push("<"+l),"object"!=typeof e)return f.push(">"+g(e,n)+"</"+l+">"),f.join("");e[n.attributesKey]&&f.push(c(e[n.attributesKey],n,a));var u=h(e,n,!0)||e[n.attributesKey]&&"preserve"===e[n.attributesKey]["xml:space"];if(u||(u="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(t,e):n.fullTagEmptyElement),!u)return f.push("/>"),f.join("");f.push(">")}return f.push(y(e,n,a+1,!1)),o=e,r=t,t&&f.push((i?s(n,a,!1):"")+"</"+l+">"),f.join("")}function y(e,t,n,o){var r,a,c,m=[];for(a in e)if(e.hasOwnProperty(a))for(c=i(e[a])?e[a]:[e[a]],r=0;r<c.length;++r){switch(a){case t.declarationKey:m.push(l(c[r],t,n));break;case t.instructionKey:m.push((t.indentInstruction?s(t,n,o):"")+f(c[r],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:m.push((t.indentText?s(t,n,o):"")+g(c[r],t));break;case t.cdataKey:m.push((t.indentCdata?s(t,n,o):"")+p(c[r],t));break;case t.doctypeKey:m.push(s(t,n,o)+d(c[r],t));break;case t.commentKey:m.push(s(t,n,o)+u(c[r],t));break;default:m.push(s(t,n,o)+b(c[r],a,t,n,h(c[r],t)))}o=o&&!m.length}return m.join("")}e.exports=function(e,t){t=function(e){var t=a.copyOptions(e);return a.ensureFlagExists("ignoreDeclaration",t),a.ensureFlagExists("ignoreInstruction",t),a.ensureFlagExists("ignoreAttributes",t),a.ensureFlagExists("ignoreText",t),a.ensureFlagExists("ignoreComment",t),a.ensureFlagExists("ignoreCdata",t),a.ensureFlagExists("ignoreDoctype",t),a.ensureFlagExists("compact",t),a.ensureFlagExists("indentText",t),a.ensureFlagExists("indentCdata",t),a.ensureFlagExists("indentAttributes",t),a.ensureFlagExists("indentInstruction",t),a.ensureFlagExists("fullTagEmptyElement",t),a.ensureFlagExists("noQuotesForNativeAttributes",t),a.ensureSpacesExists(t),"number"==typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),a.ensureKeyExists("declaration",t),a.ensureKeyExists("instruction",t),a.ensureKeyExists("attributes",t),a.ensureKeyExists("text",t),a.ensureKeyExists("comment",t),a.ensureKeyExists("cdata",t),a.ensureKeyExists("doctype",t),a.ensureKeyExists("type",t),a.ensureKeyExists("name",t),a.ensureKeyExists("elements",t),a.checkFnExists("doctype",t),a.checkFnExists("instruction",t),a.checkFnExists("cdata",t),a.checkFnExists("comment",t),a.checkFnExists("text",t),a.checkFnExists("instructionName",t),a.checkFnExists("elementName",t),a.checkFnExists("attributeName",t),a.checkFnExists("attributeValue",t),a.checkFnExists("attributes",t),a.checkFnExists("fullTagEmptyElement",t),t}(t);var n=[];return o=e,r="_root_",t.compact?n.push(y(e,t,0,!0)):(e[t.declarationKey]&&n.push(l(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(m(e[t.elementsKey],t,0,!n.length))),n.join("")}},673:(e,t,n)=>{var o=n(501);e.exports=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw new Error("The JSON structure is invalid")}else n=e;return o(n,t)}},740:(e,t,n)=>{var o=n(881).isArray;e.exports={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){e in t&&"boolean"==typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!=typeof e.spaces&&"string"!=typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){"alwaysArray"in e&&("boolean"==typeof e.alwaysArray||o(e.alwaysArray))||(e.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"==typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}}},229:(e,t,n)=>{var o,r,a=n(99),i=n(740),s=n(881).isArray;function c(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}function l(e,t){var n;if(o.compact){if(!r[o[e+"Key"]]&&(s(o.alwaysArray)?-1!==o.alwaysArray.indexOf(o[e+"Key"]):o.alwaysArray)&&(r[o[e+"Key"]]=[]),r[o[e+"Key"]]&&!s(r[o[e+"Key"]])&&(r[o[e+"Key"]]=[r[o[e+"Key"]]]),e+"Fn"in o&&"string"==typeof t&&(t=o[e+"Fn"](t,r)),"instruction"===e&&("instructionFn"in o||"instructionNameFn"in o))for(n in t)if(t.hasOwnProperty(n))if("instructionFn"in o)t[n]=o.instructionFn(t[n],n,r);else{var a=t[n];delete t[n],t[o.instructionNameFn(n,a,r)]=a}s(r[o[e+"Key"]])?r[o[e+"Key"]].push(t):r[o[e+"Key"]]=t}else{r[o.elementsKey]||(r[o.elementsKey]=[]);var i={};if(i[o.typeKey]=e,"instruction"===e){for(n in t)if(t.hasOwnProperty(n))break;i[o.nameKey]="instructionNameFn"in o?o.instructionNameFn(n,t,r):n,o.instructionHasAttributes?(i[o.attributesKey]=t[n][o.attributesKey],"instructionFn"in o&&(i[o.attributesKey]=o.instructionFn(i[o.attributesKey],n,r))):("instructionFn"in o&&(t[n]=o.instructionFn(t[n],n,r)),i[o.instructionKey]=t[n])}else e+"Fn"in o&&(t=o[e+"Fn"](t,r)),i[o[e+"Key"]]=t;o.addParent&&(i[o.parentKey]=r),r[o.elementsKey].push(i)}}function f(e){var t;if("attributesFn"in o&&e&&(e=o.attributesFn(e,r)),(o.trim||"attributeValueFn"in o||"attributeNameFn"in o||o.nativeTypeAttributes)&&e)for(t in e)if(e.hasOwnProperty(t)&&(o.trim&&(e[t]=e[t].trim()),o.nativeTypeAttributes&&(e[t]=c(e[t])),"attributeValueFn"in o&&(e[t]=o.attributeValueFn(e[t],t,r)),"attributeNameFn"in o)){var n=e[t];delete e[t],e[o.attributeNameFn(t,e[t],r)]=n}return e}function u(e){var t={};if(e.body&&("xml"===e.name.toLowerCase()||o.instructionHasAttributes)){for(var n,a=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(n=a.exec(e.body));)t[n[1]]=n[2]||n[3]||n[4];t=f(t)}if("xml"===e.name.toLowerCase()){if(o.ignoreDeclaration)return;r[o.declarationKey]={},Object.keys(t).length&&(r[o.declarationKey][o.attributesKey]=t),o.addParent&&(r[o.declarationKey][o.parentKey]=r)}else{if(o.ignoreInstruction)return;o.trim&&(e.body=e.body.trim());var i={};o.instructionHasAttributes&&Object.keys(t).length?(i[e.name]={},i[e.name][o.attributesKey]=t):i[e.name]=e.body,l("instruction",i)}}function p(e,t){var n;if("object"==typeof e&&(t=e.attributes,e=e.name),t=f(t),"elementNameFn"in o&&(e=o.elementNameFn(e,r)),o.compact){var a;if(n={},!o.ignoreAttributes&&t&&Object.keys(t).length)for(a in n[o.attributesKey]={},t)t.hasOwnProperty(a)&&(n[o.attributesKey][a]=t[a]);!(e in r)&&(s(o.alwaysArray)?-1!==o.alwaysArray.indexOf(e):o.alwaysArray)&&(r[e]=[]),r[e]&&!s(r[e])&&(r[e]=[r[e]]),s(r[e])?r[e].push(n):r[e]=n}else r[o.elementsKey]||(r[o.elementsKey]=[]),(n={})[o.typeKey]="element",n[o.nameKey]=e,!o.ignoreAttributes&&t&&Object.keys(t).length&&(n[o.attributesKey]=t),o.alwaysChildren&&(n[o.elementsKey]=[]),r[o.elementsKey].push(n);n[o.parentKey]=r,r=n}function d(e){o.ignoreText||(e.trim()||o.captureSpacesBetweenElements)&&(o.trim&&(e=e.trim()),o.nativeType&&(e=c(e)),o.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l("text",e))}function g(e){o.ignoreComment||(o.trim&&(e=e.trim()),l("comment",e))}function m(e){var t=r[o.parentKey];o.addParent||delete r[o.parentKey],r=t}function h(e){o.ignoreCdata||(o.trim&&(e=e.trim()),l("cdata",e))}function b(e){o.ignoreDoctype||(e=e.replace(/^ /,""),o.trim&&(e=e.trim()),l("doctype",e))}function y(e){e.note=e}e.exports=function(e,t){var n=a.parser(!0,{}),s={};if(r=s,o=function(e){return o=i.copyOptions(e),i.ensureFlagExists("ignoreDeclaration",o),i.ensureFlagExists("ignoreInstruction",o),i.ensureFlagExists("ignoreAttributes",o),i.ensureFlagExists("ignoreText",o),i.ensureFlagExists("ignoreComment",o),i.ensureFlagExists("ignoreCdata",o),i.ensureFlagExists("ignoreDoctype",o),i.ensureFlagExists("compact",o),i.ensureFlagExists("alwaysChildren",o),i.ensureFlagExists("addParent",o),i.ensureFlagExists("trim",o),i.ensureFlagExists("nativeType",o),i.ensureFlagExists("nativeTypeAttributes",o),i.ensureFlagExists("sanitize",o),i.ensureFlagExists("instructionHasAttributes",o),i.ensureFlagExists("captureSpacesBetweenElements",o),i.ensureAlwaysArrayExists(o),i.ensureKeyExists("declaration",o),i.ensureKeyExists("instruction",o),i.ensureKeyExists("attributes",o),i.ensureKeyExists("text",o),i.ensureKeyExists("comment",o),i.ensureKeyExists("cdata",o),i.ensureKeyExists("doctype",o),i.ensureKeyExists("type",o),i.ensureKeyExists("name",o),i.ensureKeyExists("elements",o),i.ensureKeyExists("parent",o),i.checkFnExists("doctype",o),i.checkFnExists("instruction",o),i.checkFnExists("cdata",o),i.checkFnExists("comment",o),i.checkFnExists("text",o),i.checkFnExists("instructionName",o),i.checkFnExists("elementName",o),i.checkFnExists("attributeName",o),i.checkFnExists("attributeValue",o),i.checkFnExists("attributes",o),o}(t),n.opt={strictEntities:!0},n.onopentag=p,n.ontext=d,n.oncomment=g,n.onclosetag=m,n.onerror=y,n.oncdata=h,n.ondoctype=b,n.onprocessinginstruction=u,n.write(e).close(),s[o.elementsKey]){var c=s[o.elementsKey];delete s[o.elementsKey],s[o.elementsKey]=c,delete s.text}return s}},388:(e,t,n)=>{var o=n(740),r=n(229);e.exports=function(e,t){var n,a,i;return n=function(e){var t=o.copyOptions(e);return o.ensureSpacesExists(t),t}(t),a=r(e,n),i="compact"in n&&n.compact?"_parent":"parent",("addParent"in n&&n.addParent?JSON.stringify(a,(function(e,t){return e===i?"_":t}),n.spaces):JSON.stringify(a,null,n.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},179:(e,t,n)=>{"use strict";var o=ace.require("ace/lib/oop"),r=ace.require("ace/mode/text").Mode,a=n(462).Q,i=n(727).Z,s=function(){this.HighlightRules=a,this.foldingRules=new i};o.inherits(s,r),function(){this.lineCommentStart="//",this.$id="ace/mode/sfz"}.call(s.prototype),e.exports.A=s},727:(e,t)=>{"use strict";var n=ace.require("ace/lib/oop"),o=ace.require("ace/range").Range,r=ace.require("ace/mode/folding/fold_mode").FoldMode,a=t.Z=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};n.inherits(a,r),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var o=e.getLine(n);if(this.singleLineBlockCommentRe.test(o)&&!this.startRegionRe.test(o)&&!this.tripleStarBlockCommentRe.test(o))return"";var r=this._getFoldWidgetBase(e,t,n);return!r&&this.startRegionRe.test(o)?"start":r},this.getFoldWidgetRange=function(e,t,n,o){var r,a=e.getLine(n);if(this.startRegionRe.test(a))return this.getCommentRegionBlock(e,a,n);if(r=a.match(this.foldingStartMarker)){var i=r.index;if(r[1])return this.openingBracketBlock(e,r[1],n,i);var s=e.getCommentFoldRange(n,i+r[0].length,1);return s&&!s.isMultiLine()&&(o?s=this.getSectionRange(e,n):"all"!=t&&(s=null)),s}return"markbegin"!==t&&(r=a.match(this.foldingStopMarker))?(i=r.index+r[0].length,r[1]?this.closingBracketBlock(e,r[1],n,i):e.getCommentFoldRange(n,i,-1)):void 0},this.getSectionRange=function(e,t){for(var n=e.getLine(t),r=n.search(/\S/),a=t,i=n.length,s=t+=1,c=e.getLength();++t<c;){var l=(n=e.getLine(t)).search(/\S/);if(-1!==l){if(r>l)break;var f=this.getFoldWidgetRange(e,"all",t);if(f){if(f.start.row<=a)break;if(f.isMultiLine())t=f.end.row;else if(r==l)break}s=t}}return new o(a,i,s,e.getLine(s).length)},this.getCommentRegionBlock=function(e,t,n){for(var r=t.search(/\s*$/),a=e.getLength(),i=n,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,c=1;++n<a;){t=e.getLine(n);var l=s.exec(t);if(l&&(l[1]?c--:c++,!c))break}if(n>i)return new o(i,r,n,t.length)}}.call(a.prototype)},462:(e,t)=>{"use strict";var n=ace.require("ace/lib/oop"),o=ace.require("ace/mode/text_highlight_rules").TextHighlightRules,r=function(){this.$rules={start:[{include:"#comment"},{include:"#headers"},{include:"#sfz1_sound-source"},{include:"#sfz1_instrument-settings"},{include:"#sfz1_region-logic"},{include:"#sfz1_performance-parameters"},{include:"#sfz1_modulation"},{include:"#sfz1_effects"},{include:"#sfz2_directives"},{include:"#sfz2_sound-source"},{include:"#sfz2_instrument-settings"},{include:"#sfz2_region-logic"},{include:"#sfz2_performance-parameters"},{include:"#sfz2_modulation"},{include:"#sfz2_curves"},{include:"#aria_instrument-settings"},{include:"#aria_region-logic"},{include:"#aria_performance-parameters"},{include:"#aria_modulation"},{include:"#aria_curves"},{include:"#aria_effects"}],"#comment":[{token:"punctuation.definition.comment.sfz",regex:/\/\*/,push:[{token:"punctuation.definition.comment.sfz",regex:/\*\//,next:"pop"},{defaultToken:"comment.block.sfz"}]},{token:["punctuation.whitespace.comment.leading.sfz","punctuation.definition.comment.sfz"],regex:/((?:[\s]+)?)(\/\/)(?:\s*(?=\s|$))?/,push:[{token:"comment.line.double-slash.sfz",regex:/(?=$)/,next:"pop"},{defaultToken:"comment.line.double-slash.sfz"}]}],"#headers":[{token:["punctuation.definition.tag.begin.sfz","keyword.control.$2.sfz","punctuation.definition.tag.begin.sfz"],regex:/(<)(control|global|master|group|region|curve|effect|midi)(>)/,comment:"Headers"},{token:"invalid.sfz",regex:/<.*(?!(?:control|global|master|group|region|curve|effect|midi))>/,comment:"Non-compliant headers"}],"#sfz1_sound-source":[{token:["variable.language.sound-source.$1.sfz","keyword.operator.assignment.sfz"],regex:/\b(sample)(=?)/,push:[{token:"meta.opcode.sfz",regex:/(?=(?:\s\/\/|$))/,next:"pop"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (sample): (any string)"},{token:"variable.language.sound-source.$1.sfz",regex:/\bdelay(?:_random|_oncc\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (delay|delay_random|delay_onccN): (0 to 100 percent)"},{token:"variable.language.sound-source.$1.sfz",regex:/\boffset(?:_random|_oncc\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (offset|offset_random|offset_onccN): (0 to 4294967296 sample units)"},{token:"variable.language.sound-source.$1.sfz",regex:/\bend\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive_or_neg1"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (end): (-1 to 4294967296 sample units)"},{token:"variable.language.sound-source.$1.sfz",regex:/\bcount\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (count): (0 to 4294967296 loops)"},{token:"variable.language.sound-source.$1.sfz",regex:/\bloop_mode\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_loop_mode"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (loop_mode): (no_loop|one_shot|loop_continuous|loop_sustain)"},{token:"variable.language.sound-source.$1.sfz",regex:/\b(?:loop_start|loop_end)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (loop_start|loop_end): (0 to 4294967296 sample units)"},{token:"variable.language.sound-source.$1.sfz",regex:/\b(?:sync_beats|sync_offset)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-32"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (sync_beats|sync_offset): (0 to 32 beats)"}],"#sfz1_instrument-settings":[{token:"variable.language.instrument-settings.$1.sfz",regex:/\b(?:group|polyphony_group|off_by)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (group|polyphony_group|off_by): (0 to 4294967296 sample units)"},{token:"variable.language.instrument-settings.$1.sfz",regex:/\boff_mode\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_fast-normal-time"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (off_mode): (fast|normal)"},{token:"variable.language.instrument-settings.$1.sfz",regex:/\boutput\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-1024"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (output): (0 to 1024 MIDI Nodes)"}],"#sfz1_region-logic":[{token:"variable.language.region-logic.key-mapping.$1.sfz",regex:/\b(?:key|lokey|hikey)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127_or_string_note"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (key|lokey|hikey): (0 to 127 MIDI Note or C-1 to G#9 Note)"},{token:"variable.language.region-logic.key-mapping.$1.sfz",regex:/\b(?:lovel|hivel)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (love|hivel): (0 to 127 MIDI Velocity)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\b(?:lochan|hichan)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_1-16"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lochan|hichan): (1 to 16 MIDI Channel)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\b(?:lo|hi)cc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (loccN|hiccN): (0 to 127 MIDI Controller)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\b(?:lobend|hibend)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg8192-8192"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lobend|hibend): (-8192 to 8192 cents)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\bsw_(?:lokey|hikey|last|down|up|previous)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127_or_string_note"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (sw_lokey|sw_hikey|sw_last|sw_down|sw_up|sw_previous): (0 to 127 MIDI Note or C-1 to G#9 Note)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\bsw_vel\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_current-previous"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (sw_vel): (current|previous)"},{token:"variable.language.region-logic.internal-conditions.$1.sfz",regex:/\b(?:lobpm|hibpm)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-500"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lobpm|hibpm): (0 to 500 BPM)"},{token:"variable.language.region-logic.internal-conditions.$1.sfz",regex:/\b(?:lochanaft|hichanaft|lopolyaft|hipolyaft)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lochanaft|hichanaft|lopolyaft|hipolyaft): (0 to 127 MIDI Controller)"},{token:"variable.language.region-logic.internal-conditions.$1.sfz",regex:/\b(?:lorand|hirand)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-1"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lorand|hirand): (0 to 1 float)"},{token:"variable.language.region-logic.internal-conditions.$1.sfz",regex:/\b(?:seq_length|seq_position)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_1-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (seq_length|seq_position): (1 to 100 beats)"},{token:"variable.language.region-logic.triggers.$1.sfz",regex:/\btrigger\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_attack-release-first-legato"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (trigger): (attack|release|first|legato)"},{token:"variable.language.region-logic.triggers.$1.sfz",regex:/\bon_(?:lo|hi)cc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg1-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (on_loccN|on_hiccN): (-1 to 127 MIDI Controller)"}],"#sfz1_performance-parameters":[{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\b(?:pan|position|width|amp_veltrack)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg100-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (pan|position|width|amp_veltrack): (-100 to 100 percent)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bvolume\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg144-6"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (volume): (-144 to 6 dB)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bamp_keycenter\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127_or_string_note"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amp_keycenter): (0 to 127 MIDI Note or C-1 to G#9 Note)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bamp_keytrack\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg96-12"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amp_keytrack): (-96 to 12 dB)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bamp_velcurve_(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-1"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amp_velcurve_N): (0 to 1 curve)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bamp_random\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-24"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amp_random): (0 to 24 dB)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bgain_oncc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg144-48"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (gain_onccN): (-144 to 48 dB)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\brt_decay\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-200"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (rt_decay): (0 to 200 dB)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\b(?:xf_cccurve|xf_keycurve|xf_velcurve)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_gain-power"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (xf_cccurve|xf_keycurve|xf_velcurve): (gain|power)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\b(?:xfin_locc(?:\d{1,3})?|xfin_hicc(?:\d{1,3})?|xfout_locc(?:\d{1,3})?|xfout_hicc(?:\d{1,3})?|xfin_lokey|xfin_hikey|xfout_lokey|xfout_hikey|xfin_lovel|xfin_hivel|xfout_lovel|xfout_hivel)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (xfin_loccN|xfin_hiccN|xfout_loccN|xfout_hiccN|xfin_lokey|xfin_hikey|xfout_lokey|xfout_hikey|xfin_lovel|xfin_hivel|xfout_lovel|xfout_hivel): (0 to 127 MIDI Velocity)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\b(?:xfin_lokey|xfin_hikey|xfout_lokey|xfout_hikey)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127_or_string_note"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (xfin_lokey|xfin_hikey|xfout_lokey|xfout_hikey): (0 to 127 MIDI Note or C-1 to G#9 Note)"},{token:"variable.language.performance-parameters.pitch.$1.sfz",regex:/\b(?:bend_up|bend_down|pitch_veltrack)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg9600-9600"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (bend_up|bend_down|pitch_veltrack): (-9600 to 9600 cents)"},{token:"variable.language.performance-parameters.pitch.$1.sfz",regex:/\bbend_step\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_1-1200"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (bend_step): (1 to 1200 cents)"},{token:"variable.language.performance-parameters.pitch.$1.sfz",regex:/\bpitch_keycenter\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127_or_string_note"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (pitch_keycenter): (0 to 127 MIDI Note)"},{token:"variable.language.performance-parameters.pitch.$1.sfz",regex:/\bpitch_keytrack\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg1200-1200"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (pitch_keytrack): (-1200 to 1200 cents)"},{token:"variable.language.performance-parameters.pitch.$1.sfz",regex:/\bpitch_random\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-9600"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (pitch_random): (0 to 9600 cents)"},{token:"variable.language.performance-parameters.pitch.$1.sfz",regex:/\btranspose\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg127-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (transpose): (-127 to 127 MIDI Note)"},{token:"variable.language.performance-parameters.pitch.$1.sfz",regex:/\btune\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg9600-9600"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (tune): (-2400 to 2400 cents)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\bcutoff\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (cutoff): (0 to arbitrary Hz)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\b(?:cutoff_oncc(?:\d{1,3})?|cutoff_chanaft|cutoff_polyaft)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg9600-9600"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (cutoff_onccN|cutoff_chanaft|cutoff_polyaft): (-9600 to 9600 cents)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\bfil_keytrack\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-1200"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (fil_keytrack): (0 to 1200 cents)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\bfil_keycenter\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127_or_string_note"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (fil_keycenter): (0 to 127 MIDI Note)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\bfil_random\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-9600"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (fil_random): (0 to 9600 cents)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\bfil_type\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_lpf-hpf-bpf-brf"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (fil_type): (lpf_1p|hpf_1p|lpf_2p|hpf_2p|bpf_2p|brf_2p)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\bfil_veltrack\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg9600-9600"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (fil_veltrack): (-9600 to 9600 cents)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\bresonance\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-40"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (resonance): (0 to 40 dB)"},{token:"variable.language.performance-parameters.eq.$1.sfz",regex:/\b(?:eq1_freq|eq2_freq|eq3_freq)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-30000"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (eq1_freq|eq2_freq|eq3_freq): (0 to 30000 Hz)"},{token:"variable.language.performance-parameters.eq.$1.sfz",regex:/\b(?:eq[1-3]_freq_oncc(?:\d{1,3})?|eq1_vel2freq|eq2_vel2freq|eq3_vel2freq)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg30000-30000"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (eq1_freq_onccN|eq2_freq_onccN|eq3_freq_onccN|eq1_vel2freq|eq2_vel2freq|eq3_vel2freq): (-30000 to 30000 Hz)"},{token:"variable.language.performance-parameters.eq.$1.sfz",regex:/\b(?:eq1_bw|eq2_bw|eq3_bw)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-4"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (eq1_bw|eq2_bw|eq3_bw): (0.0001 to 4 octaves)"},{token:"variable.language.performance-parameters.eq.$1.sfz",regex:/\b(?:eq[1-3]_bw_oncc(?:\d{1,3})?|eq1_vel2bw|eq2_vel2bw|eq3_vel2bw)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg4-4"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (eq1_bw_onccN|eq2_bw_onccN|eq3_bw_onccN|eq1_vel2bw|eq2_vel2bw|eq3_vel2bw): (-30000 to 30000 Hz)"},{token:"variable.language.performance-parameters.eq.$1.sfz",regex:/\b(?:eq[1-3]_(?:vel2)?gain|eq[1-3]_gain_oncc(?:\d{1,3})?)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg96-24"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (eq1_gain|eq2_gain|eq3_gain|eq1_gain_onccN|eq2_gain_onccN|eq3_gain_onccN|eq1_vel2gain|eq2_vel2gain|eq3_vel2gain): (-96 to 24 dB)"}],"#sfz1_modulation":[{token:"variable.language.modulation.envelope-generators.$1.sfz",regex:/\b(?:ampeg|fileg|pitcheg)_(?:(?:attack|decay|delay|hold|release|start|sustain)(?:_oncc(?:\d{1,3})?)?|vel2(?:attack|decay|delay|hold|release|start|sustain))\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (ampeg_delay_onccN|ampeg_attack_onccN|ampeg_hold_onccN|ampeg_decay_onccN|ampeg_release_onccN|ampeg_vel2delay|ampeg_vel2attack|ampeg_vel2hold|ampeg_vel2decay|ampeg_vel2release|pitcheg_vel2delay|pitcheg_vel2attack|pitcheg_vel2hold|pitcheg_vel2decay|pitcheg_vel2release|fileg_vel2delay|fileg_vel2attack|fileg_vel2hold|fileg_vel2decay|fileg_vel2release): (0 to 100 seconds)"},{token:"variable.language.modulation.envelope-generators.$1.sfz",regex:/\b(?:pitcheg_depth|fileg_depth|pitcheg_vel2depth|fileg_vel2depth)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg12000-12000"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (pitcheg_depth|fileg_depth|pitcheg_vel2depth|fileg_vel2depth): (-12000 to 12000 cents)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\bamplfo_(?:depth(?:cc(?:\d{1,3})?)?|depth(?:chan|poly)aft)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg20-20"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amplfo_depth|amplfo_depthccN|amplfo_depthchanaft|amplfo_depthpolyaft): (-20 to 20 dB)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\b(?:fillfo|pitchlfo)_(?:depth(?:(?:_on)?cc(?:\d{1,3})?)?|depth(?:chan|poly)aft)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg1200-1200"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (pitchlfo_depth|pitchlfo_depthccN|pitchlfo_depthchanaft|pitchlfo_depthpolyaft|fillfo_depth|fillfo_depthccN|fillfo_depthchanaft|fillfo_depthpolyaft): (-1200 to 1200 cents)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\b(?:(?:amplfo|fillfo|pitchlfo)_(?:freq|(?:cc(?:\d{1,3})?)?)|freq(?:chan|poly)aft)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg200-200"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amplfo_freqccN|amplfo_freqchanaft|amplfo_freqpolyaft|pitchlfo_freqccN|pitchlfo_freqchanaft|pitchlfo_freqpolyaft|fillfo_freqccN|fillfo_freqchanaft|fillfo_freqpolyaft): (-200 to 200 Hz)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\b(?:amplfo|fillfo|pitchlfo)_(?:delay|fade)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amplfo_delay|amplfo_fade|pitchlfo_delay|pitchlfo_fade|fillfo_delay|fillfo_fade): (0 to 100 seconds)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\b(?:amplfo_freq|pitchlfo_freq|fillfo_freq)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-20"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amplfo_freq|pitchlfo_freq|fillfo_freq): (0 to 20 Hz)"}],"#sfz1_effects":[{token:"variable.language.effects.$1.sfz",regex:/\b(?:effect1|effect2)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (effect1|effect2): (0 to 100 percent)"}],"#sfz2_directives":[{token:["meta.preprocessor.define.sfz","meta.generic.define.sfz","punctuation.definition.variable.sfz","meta.preprocessor.string.sfz","meta.generic.define.sfz","meta.preprocessor.string.sfz"],regex:/(\#define)(\s+)(\$)([^\s]+)(\s+)(.+)\b/,comment:"#define statement"},{token:["meta.preprocessor.import.sfz","meta.generic.include.sfz","punctuation.definition.string.begin.sfz","meta.preprocessor.string.sfz","meta.preprocessor.string.sfz","punctuation.definition.string.end.sfz"],regex:/(\#include)(\s+)(")(.+)(?=\.sfz)(\.sfzh?)(")/,comment:"#include statement"},{token:"variable.other.constant.sfz",regex:/\$[^\s\=]+/,comment:"defined variable"}],"#sfz2_sound-source":[{token:["variable.language.sound-source.$1.sfz","keyword.operator.assignment.sfz"],regex:/\b(default_path)(=?)/,push:[{token:"meta.opcode.sfz",regex:/(?=(?:\s\/\/|$))/,next:"pop"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (default_path): any string"},{token:"variable.language.sound-source.sample-playback.$1.sfz",regex:/\bdirection\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_forward-reverse"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (direction): (forward|reverse)"},{token:"variable.language.sound-source.sample-playback.$1.sfz",regex:/\bloop_count\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (loop_count): (0 to 4294967296 loops)"},{token:"variable.language.sound-source.sample-playback.$1.sfz",regex:/\bloop_type\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_forward-backward-alternate"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (loop_type): (forward|backward|alternate)"},{token:"variable.language.sound-source.sample-playback.$1.sfz",regex:/\bmd5\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_md5"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (md5): (128-bit hex md5 hash)"}],"#sfz2_instrument-settings":[{token:"variable.language.instrument-settings.$1.sfz",regex:/\boctave_offset\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg10-10"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (octave_offset): (-10 to 10 octaves)"},{token:["variable.language.instrument-settings.$1.sfz","keyword.operator.assignment.sfz"],regex:/\b(region_label|label_cc(?:\d{1,3})?)(=?)/,push:[{token:"meta.opcode.sfz",regex:/(?=(?:\s\/\/|$))/,next:"pop"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (region_label|label_ccN): (any string)"},{token:"variable.language.instrument-settings.$1.sfz",regex:/\bset_cc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (set_ccN): (0 to 127 MIDI Controller)"},{token:"variable.language.instrument-settings.voice-lifecycle.$1.sfz",regex:/\b(?:polyphony|note_polyphony)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (polyphony|note_polyphony): (0 to 127 voices)"},{token:"variable.language.instrument-settings.voice-lifecycle.$1.sfz",regex:/\b(?:note_selfmask|rt_dead)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_on-off"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (note_selfmask|rt_dead): (on|off)"}],"#sfz2_region-logic":[{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\b(?:sustain_sw|sostenuto_sw)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_on-off"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (sustain_sw|sostenuto_sw): (on|off)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\b(?:loprog|hiprog)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (loprog|hiprog): (0 to 127 MIDI program)"}],"#sfz2_performance-parameters":[{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bvolume_oncc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg144-6"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (volume_onccN): (-144 to 6 dB)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bphase\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_normal-invert"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (phase): (normal|invert)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bwidth_oncc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg100-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (width_onccN): (-100 to 100 percent)"},{token:"variable.language.performance-parameters.pitch.$1.sfz",regex:/\bbend_smooth\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-9600"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (bend_smooth): (0 to 9600 cents)"},{token:"variable.language.performance-parameters.pitch.$1.sfz",regex:/\b(?:bend_stepup|bend_stepdown)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_1-1200"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (bend_stepup|bend_stepdown): (1 to 1200 cents)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\b(?:cutoff2|cutoff2_oncc(?:\d{1,3})?)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (cutoff2|cutoff2_onccN): (0 to arbitrary Hz)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\b(?:resonance_oncc(?:\d{1,3})?|resonance2|resonance2_oncc(?:\d{1,3})?)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-40"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (resonance_onccN|resonance2|resonance2_onccN): (0 to 40 dB)"},{token:"variable.language.performance-parameters.filters.$1.sfz",regex:/\bfil2_type\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_lpf-hpf-bpf-brf"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (fil2_type): (lpf_1p|hpf_1p|lpf_2p|hpf_2p|bpf_2p|brf_2p)"}],"#sfz2_modulation":[{token:"variable.language.modulation.envelope-generators.$1.sfz",regex:/\beg\d{2}_(?:curve|loop|points|sustain)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (egN_(curve|loop|points|sustain)): (positive int)"},{token:"variable.language.modulation.envelope-generators.$1.sfz",regex:/\beg\d{2}_level\d*(?:_oncc(?:\d{1,3})?)?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg1-1"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (egN_level|egN_level_onccX): (-1 to 1 float)"},{token:"variable.language.modulation.envelope-generators.$1.sfz",regex:/\beg\d{2}_shape\d+\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg10-10"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (egN_shapeX): (-10 to 10 number)"},{token:"variable.language.modulation.envelope-generators.$1.sfz",regex:/\beg\d{2}_time\d*(?:_oncc(?:\d{1,3})?)?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (egN_time|egN_time_onccX): (0 to 100 seconds)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\blfo\d{2}_(?:wave|count|freq_(?:smooth|step)cc(?:\d{1,3})?)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lfoN_wave|lfoN_count|lfoN_freq|lfoN_freq_onccX|lfoN_freq_smoothccX): (positive int)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\blfo\d{2}_freq(?:_oncc(?:\d{1,3})?)?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg20-20"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lfoN_freq|lfoN_freq_onccN): (-20 to 20 Hz)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\b(?:lfo\d{2}_(?:delay|fade)(?:_oncc(?:\d{1,3})?)?|count)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lfoN_delay|lfoN_delay_onccX|lfoN_fade|lfoN_fade_onccX): (0 to 100 seconds)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\b(?:lfo\d{2}_phase(?:_oncc(?:\d{1,3})?)?|count)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-1"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lfoN_phase|lfoN_phase_onccX): (0 to 1 number)"},{token:"variable.language.modulation.envelope-generators.$1.sfz",regex:/\beg\d{2}_(?:(?:depth_lfo|depthadd_lfo|freq_lfo)|(?:amplitude|depth|depth_lfo|depthadd_lfo|freq_lfo|pitch|cutoff2?|eq[1-3]freq|eq[1-3]bw|eq[1-3]gain|pan|resonance2?|volume|width)(?:_oncc(?:\d{1,3})?)?)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_any"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (other eg destinations): (any float)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\blfo\d{2}_(?:(?:depth_lfo|depthadd_lfo|freq_lfo)|(?:amplitude|decim|bitred|depth_lfo|depthadd_lfo|freq_lfo|pitch|cutoff2?|eq[1-3]freq|eq[1-3]bw|eq[1-3]gain|pan|resonance2?|volume|width)(?:_oncc(?:\d{1,3})?)?)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_any"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (other lfo destinations): (any float)"}],"#sfz2_curves":[{token:"variable.language.curves.$1.sfz",regex:/\bv[0-9]{3}\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-1"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (vN): (0 to 1 number)"}],"#aria_instrument-settings":[{token:"variable.language.instrument-settings.$1.sfz",regex:/\bhint_[A-z_]*\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_any"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (hint_): (any number)"},{token:"variable.language.instrument-settings.$1.sfz",regex:/\b(?:set_|lo|hi)hdcc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_any"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (set_hdccN|lohdccN|hihdccN): (any number)"},{token:"variable.language.instrument-settings.$1.sfz",regex:/\b(?:sustain_cc|sostenuto_cc|sustain_lo|sostenuto_lo)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (sustain_cc|sostenuto_cc|sustain_lo|sostenuto_lo): (0 to 127 MIDI byte)"},{token:"variable.language.instrument-settings.$1.sfz",regex:/\bsw_octave_offset\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_neg10-10"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (sw_octave_offset): (-10 to 10 octaves)"},{token:"variable.language.instrument-settings.voice-lifecycle.$1.sfz",regex:/\boff_curve\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (off_curve): (0 to any curve)"},{token:"variable.language.instrument-settings.voice-lifecycle.$1.sfz",regex:/\b(?:off_shape|off_time)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg10-10"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (off_shape|off_time): (-10 to 10 number)"}],"#aria_region-logic":[{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\b(?:sw_default|sw_lolast|sw_hilast)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (sw_default|sw_lolast|sw_hilast): (0 to 127 MIDI Note)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\bsw_label\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_any_continuous"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (sw_label): (any string)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\bvar\d{2}_curvecc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (varNN_curveccX): (0 to any curve)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\bvar\d{2}_mod\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_add-mult"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (varNN_mod): (add|mult)"},{token:"variable.language.region-logic.midi-conditions.$1.sfz",regex:/\b(?:var\d{2}_oncc(?:\d{1,3})?|var\d{2}_(?:pitch|cutoff|resonance|cutoff2|resonance2|eq[1-3]freq|eq[1-3]bw|eq[1-3]gain|volume|amplitude|pan|width))\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_any"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (varNN_onccX|varNN_target): (any float)"}],"#aria_performance-parameters":[{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\b(?:amplitude|amplitude_oncc(?:\d{1,3})?|global_amplitude|master_amplitude|group_amplitude)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_0-100"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amplitude|amplitude_onccN|global_amplitude|master_amplitude|group_amplitude): (0 to 100 percent)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bamplitude_curvecc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amplitude_curveccN): (any positive curve)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bamplitude_smoothcc(?:\d{1,3})?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-9600"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (amplitude_smoothccN): (0 to 9600 number)"},{token:"variable.language.performance-parameters.amplifier.$1.sfz",regex:/\bpan_law\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_balance-mma"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (pan_law): (balance|mma)"},{token:"variable.language.performance-parameters.amplifiers.$1.sfz",regex:/\b(?:global_volume|master_volume|group_volume|volume_oncc(?:\d{1,3})?)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg144-6"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (global_volume|master_volume|group_volume|volume_onccN): (-144 to 6 dB)"}],"#aria_modulation":[{token:"variable.language.modulation.envelope-generators.$1.sfz",regex:/\b(?:ampeg_attack_shape|ampeg_decay_shape|ampeg_release_shape|eg\d{2}_shape\d+)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_neg10-10"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (ampeg_attack_shape|ampeg_decay_shape|ampeg_release_shape|egN_shapeX): (-10 to 10 float)"},{token:"variable.language.modulation.envelope-generators.$1.sfz",regex:/\b(?:ampeg_release_zero|ampeg_decay_zero)\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_on-off"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (ampeg_release_zero|ampeg_decay_zero): (true|false)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\blfo\d{2}_(?:offset|ratio|scale)2?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#float_any"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lfoN_offset|lfoN_offset2|lfoN_ratio|lfoN_ratio2|lfoN_scale|lfoN_scale2): (any float)"},{token:"variable.language.modulation.lfo.$1.sfz",regex:/\blfo\d{2}_wave2?\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_0-127"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (lfoN_wave|lfoN_wav2): (0 to 127 MIDI Number)"}],"#aria_curves":[{token:"variable.language.curves.$1.sfz",regex:/\bcurve_index\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_positive"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (curve_index): (any positive integer)"}],"#aria_effects":[{token:"variable.language.effects.$1.sfz",regex:/\bparam_offset\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#int_any"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (param_offset): (any integer)"},{token:"variable.language.effects.$1.sfz",regex:/\bvendor_specific\b/,push:[{token:"meta.opcode.sfz",regex:/\s|$/,next:"pop"},{include:"#string_any_continuous"},{defaultToken:"meta.opcode.sfz"}],comment:"opcodes: (vendor_specific): (any to continuous string)"}],"#float_neg30000-30000":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-?(?<!\.)\b(?:30000|(?:[0-9]|[1-9][0-9]{1,3}|2[0-9]{4})(?:\.\d*)?)\b)\b/},{token:"invalid.sfz",regex:/(?!=-?(?<!\.)\b(?:30000|(?:[0-9]|[1-9][0-9]{1,3}|2[0-9]{4})(?:\.\d*)?)\b\b)[^\s]*/}],"#float_neg144-48":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-(?<!\.)(?:144|(?:[1-9]|[1-8][0-9]|9[0-9]|1[0-4][0-3])(?:\.\d*)?)\b|\b(?<!\.)(?:48|(?:[0-9]|[1-3][0-9]|4[0-7])(?:\.\d*)?)\b)/},{token:"invalid.sfz",regex:/(?!=(?:-(?<!\.)(?:144|(?:[1-9]|[1-8][0-9]|9[0-9]|1[0-4][0-3])(?:\.\d*)?)\b|\b(?<!\.)(?:48|(?:[0-9]|[1-3][0-9]|4[0-7])(?:\.\d*)?)\b)).*/}],"#float_neg144-6":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-(?<!\.)(?:144|(?:[1-9]|[1-8][0-9]|9[0-9]|1[0-4][0-3])(?:\.\d*)?)\b|\b(?<!\.)(?:6|[0-5](?:\.\d*)?\b))/},{token:"invalid.sfz",regex:/(?!=(?:-(?<!\.)(?:144|(?:[1-9]|[1-8][0-9]|9[0-9]|1[0-4][0-3])(?:\.\d*)?)\b|\b(?<!\.)(?:6|[0-5](?:\.\d*)?\b))).*/}],"#float_neg200-200":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-?(?<!\.)(?:200|(?:[0-9]|[1-9][0-9]{1,2})(?:\.\d*)?))\b/},{token:"invalid.sfz",regex:/(?!=-?(?<!\.)(?:200|(?:[0-9]|[1-9][0-9]{1,2})(?:\.\d*)?)\b)[^\s]*/}],"#float_neg100-100":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-?(?<!\.)(?:100|(?:[0-9]|[1-9][0-9])(?:\.\d*)?))\b/},{token:"invalid.sfz",regex:/(?!=-?(?<!\.)(?:100|(?:[0-9]|[1-9][0-9])(?:\.\d*)?)\b)[^\s]*/}],"#float_neg96-12":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-(?<!\.)(?:96|(?:[1-9]|[1-8][0-9]|9[0-5])(?:\.\d*)?)\b|\b(?<!\.)(?:12|(?:[0-9]|1[01])(?:\.\d*)?\b))/},{token:"invalid.sfz",regex:/(?!=(?:-(?<!\.)(?:96|(?:[1-9]|[1-8][0-9]|9[0-5])(?:\.\d*)?)\b|\b(?<!\.)(?:12|(?:[0-9]|1[01])(?:\.\d*)?\b))).*/}],"#float_neg96-24":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-(?<!\.)(?:96|(?:[1-9]|[1-8][0-9]|9[0-5])(?:\.\d*)?)\b|\b(?<!\.)(?:24|(?:[0-9]|1[0-9]|2[0-3])(?:\.\d*)?\b))/},{token:"invalid.sfz",regex:/(?!=(?:-(?<!\.)(?:96|(?:[1-9]|[1-8][0-9]|9[0-5])(?:\.\d*)?)\b|\b(?<!\.)(?:24|(?:[0-9]|1[0-9]|2[0-3])(?:\.\d*)?\b))).*/}],"#float_neg20-20":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-?(?<!\.)(?:20|1?[0-9](?:\.\d*)?))\b/},{token:"invalid.sfz",regex:/(?!=-?(?<!\.)(?:20|1?[0-9](?:\.\d*)?)\b)[^\s]*/}],"#float_neg10-10":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-?(?<!\.)(?:10|[0-9](?:\.\d*)?))\b/},{token:"invalid.sfz",regex:/(?!=-?(?<!\.)(?:10|[0-9](?:\.\d*)?)\b)[^\s]*/}],"#float_neg4-4":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-?(?<!\.)(?:4|[0-3](?:\.\d*)?))\b/},{token:"invalid.sfz",regex:/(?!=-?(?<!\.)(?:4|[0-3](?:\.\d*)?)\b)[^\s]*/}],"#float_neg1-1":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-?(?<!\.)(?:1|0(?:\.\d*)?))\b/},{token:"invalid.sfz",regex:/(?!=-?(?<!\.)(?:1|0(?:\.\d*)?)\b)[^\s]*/}],"#float_0-1":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)(1|0(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)(?:1|0(?:\.\d*)?)\b)[^\s]*/}],"#float_0-4":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)(4|[0-3](?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)(?:4|[0-3](?:\.\d*)?)\b)[^\s]*/}],"#float_0-20":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)(20|(?:[0-9]|1[0-9])(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)(?:24|(?:[0-9]|1[0-9])(?:\.\d*)?)\b)[^\s]*/}],"#float_0-24":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)(24|(?:[0-9]|1[0-9]|2[0-3])(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)(?:24|(?:[0-9]|1[0-9]|2[0-3])(?:\.\d*)?)\b)[^\s]*/}],"#float_0-32":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)(32|(?:[0-9]|1[0-9]|2[0-9]|3[0-1])(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)(?:32|(?:[0-9]|1[0-9]|2[0-9]|3[0-1])(?:\.\d*)?)\b)[^\s]*/}],"#float_0-40":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)(40|(?:[0-9]|[1-3][0-9])(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)(?:40|(?:[0-9]|[1-3][0-9])(?:\.\d*)?)\b)[^\s]*/}],"#float_0-100":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)(100|(?:[0-9]|[1-9][0-9])(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)(?:100|(?:[0-9]|[1-9][0-9])(?:\.\d*)?)\b)[^\s]*/}],"#float_0-200":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)(200|(?:[0-9]|[1-9][0-9]|1[0-9]{2})(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)(?:200|(?:[0-9]|[1-9][0-9]|1[0-9]{2})(?:\.\d*)?)\b)[^\s]*/}],"#float_0-500":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)(500|(?:[0-9]|[1-8][0-9]|9[0-9]|[1-4][0-9]{2})(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)(?:500|(?:[0-9]|[1-8][0-9]|9[0-9]|[1-4][0-9]{2})(?:\.\d*)?)\b)[^\s]*/}],"#float_0-30000":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(?<!\.)\b(30000|(?:[0-9]|[1-9][0-9]{1,3}|2[0-9]{4})(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=(?<!\.)\b(?:30000|(?:[0-9]|[1-9][0-9]{1,3}|2[0-9]{4})(?:\.\d*)?)\b)[^\s]*/}],"#float_positive":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(\d+(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=\d+(?:\.\d*)?\b)[^\s]*/}],"#float_any":[{token:["keyword.operator.assignment.sfz","constant.numeric.float.sfz"],regex:/(=)(-?\b\d+(?:\.\d*)?)\b/},{token:"invalid.sfz",regex:/(?!=-?\b\d+(?:\.\d*)?\b)[^\s]*/}],"#int_neg12000-12000":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-?\b(?:12000|[0-9]|[1-9][0-9]{1,3}|1[01][0-9]{3}))\b/},{token:"invalid.sfz",regex:/(?!=-?\b(?:12000|[0-9]|[1-9][0-9]{1,3}|1[01][0-9]{3})\b)[^\s]*/}],"#int_neg9600-9600":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-?(?:[0-9]|[1-9][0-9]{1,2}|[1-8][0-9]{3}|9[0-5][0-9]{2}|9600))\b/},{token:"invalid.sfz",regex:/(?!=-?(?:[0-9]|[1-9][0-9]{1,2}|[1-8][0-9]{3}|9[0-5][0-9]{2}|9600)\b)[^\s]*/}],"#int_neg8192-8192":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-?(?:[0-9]|[1-9][0-9]|[1-9][0-9]{2}|[1-7][0-9]{3}|80[0-9]{2}|81[0-8][0-9]|819[0-2]))\b/},{token:"invalid.sfz",regex:/(?!=-?(?:[0-9]|[1-9][0-9]|[1-9][0-9]{2}|[1-7][0-9]{3}|80[0-9]{2}|81[0-8][0-9]|819[0-2])\b)[^\s]*/}],"#int_neg1200-1200":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-?\b(?:1200|[0-9]|[1-9][0-9]{1,2}|1[01][0-9]{2}))\b/},{token:"invalid.sfz",regex:/(?!=-?\b(?:1200|[0-9]|[1-9][0-9]{1,2}|1[01][0-9]{2})\b)[^\s]*/}],"#int_neg100-100":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-?\b(?:100|[0-9]|[1-9][0-9]))\b/},{token:"invalid.sfz",regex:/(?!=-?\b(?:100|[0-9]|[1-9][0-9])\b)[^\s]*/}],"#int_neg10-10":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-?\b(?:10|[0-9]))\b/},{token:"invalid.sfz",regex:/(?!=-?\b(?:10|[0-9])\b)[^\s]*/}],"#int_neg1-127":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-1|[0-9]|[1-8][0-9]|9[0-9]|1[01][0-9]|12[0-7])\b/},{token:"invalid.sfz",regex:/(?!=(?:-1|[0-9]|[1-8][0-9]|9[0-9]|1[01][0-9]|12[0-7])\b)[^\s]*/}],"#int_neg127-127":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-?\b(?:[0-9]|[1-8][0-9]|9[0-9]|1[01][0-9]|12[0-7]))\b/},{token:"invalid.sfz",regex:/(?!=-?\b(?:[0-9]|[1-8][0-9]|9[0-9]|1[01][0-9]|12[0-7])\b)[^\s]*/}],"#int_0-127":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)([0-9]|[1-8][0-9]|9[0-9]|1[01][0-9]|12[0-7])\b/},{token:"invalid.sfz",regex:/(?!=(?:[0-9]|[1-8][0-9]|9[0-9]|1[01][0-9]|12[0-7])\b)[^\s]*/}],"#int_0-127_or_string_note":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)((?:[0-9]|[1-8][0-9]|9[0-9]|1[01][0-9]|12[0-7])|[cdefgabCDEFGAB]\#?(?:-1|[0-9]))\b/},{token:"invalid.sfz",regex:/(?!=(?:(?:[0-9]|[1-8][0-9]|9[0-9]|1[01][0-9]|12[0-7])|[cdefgabCDEFGAB]\#?(?:-1|[0-9]))\b)[^\s]*/}],"#int_0-1024":[{token:"constant.numeric.integer.sfz",regex:/=(?:[0-9]|[1-9][0-9]|[1-9][0-9]{2}|10[01][0-9]|102[0-4])\b/},{token:"invalid.sfz",regex:/(?!=(?:[0-9]|[1-9][0-9]|[1-9][0-9]{2}|10[01][0-9]|102[0-4])\b)[^\s]*/}],"#int_0-1200":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(1200|[0-9]|[1-9][0-9]{1,2}|1[01][0-9{2}])\b/},{token:"invalid.sfz",regex:/(?!=(?:1200|[0-9]|[1-9][0-9]{1,2}|1[01][0-9]{2}])\b)[^\s]*/}],"#int_0-9600":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)([0-9]|[1-9][0-9]{1,2}|[1-8][0-9]{3}|9[0-5][0-9]{2}|9600)\b/},{token:"invalid.sfz",regex:/(?!=(?:[0-9]|[1-9][0-9]{1,2}|[1-8][0-9]{3}|9[0-5][0-9]{2}|9600)\b)[^\s]*/}],"#int_1-16":[{token:"constant.numeric.integer.sfz",regex:/=(?:[1-9]|1[0-6])\b/},{token:"invalid.sfz",regex:/(?!=(?:[1-9]|1[0-6])\b)[^\s]*/}],"#int_1-100":[{token:"constant.numeric.integer.sfz",regex:/=(?:100|[1-9]|[1-9][0-9])\b/},{token:"invalid.sfz",regex:/(?!=(?:100|[1-9]|[1-9][0-9])\b)[^\s]*/}],"#int_1-1200":[{token:"constant.numeric.integer.sfz",regex:/=(?:1200|[0-9]|[1-9][0-9]{1,2}|1[01][0-9]{2})\b/},{token:"invalid.sfz",regex:/(?!=(?:1200|[0-9]|[1-9][0-9]{1,2}|1[01][0-9]{2})\b)[^\s]*/}],"#int_positive":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(\d+)\b/},{token:"invalid.sfz",regex:/(?:(?!\d+).)*$/}],"#int_positive_or_neg1":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-1|\d+)\b/},{token:"invalid.sfz",regex:/(?:(?!(?:-1|\d+)\b).)*$/}],"#int_any":[{token:["keyword.operator.assignment.sfz","constant.numeric.integer.sfz"],regex:/(=)(-?\b\d+)\b/},{token:"invalid.sfz",regex:/(?:(?!-?\b\d+).)*$/}],"#string_add-mult":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(add|mult)\b/},{token:"invalid.sfz",regex:/(?!=(?:add|mult)).*/}],"#string_attack-release-first-legato":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(attack|release|first|legato)\b/},{token:"invalid.sfz",regex:/(?!=(?:attack|release|first|legato)).*/}],"#string_balance-mma":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(balance|mma)\b/},{token:"invalid.sfz",regex:/(?!=(?:balance|mma)).*/}],"#string_current-previous":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(current|previous)\b/},{token:"invalid.sfz",regex:/(?!=(?:current|previous)).*/}],"#string_fast-normal-time":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(fast|normal|time)\b/},{token:"invalid.sfz",regex:/(?!=(?:fast|normal|time)).*/}],"#string_forward-backward-alternate":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(forward|backward|alternate)\b/},{token:"invalid.sfz",regex:/(?!=(?:forward|backward|alternate)).*/}],"#string_forward-reverse":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(forward|reverse)\b/},{token:"invalid.sfz",regex:/(?!=(?:forward|reverse)).*/}],"#string_gain-power":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(gain|power)\b/},{token:"invalid.sfz",regex:/(?!=(?:gain|power)).*/}],"#string_loop_mode":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(no_loop|one_shot|loop_continuous|loop_sustain)\b/},{token:"invalid.sfz",regex:/(?!=(?:no_loop|one_shot|loop_continuous|loop_sustain)).*/}],"#string_lpf-hpf-bpf-brf":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(lpf_1p|hpf_1p|lpf_2p|hpf_2p|bpf_2p|brf_2p)\b/},{token:"invalid.sfz",regex:/(?!=(?:lpf_1p|hpf_1p|lpf_2p|hpf_2p|bpf_2p|brf_2p)).*/}],"#string_md5":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)([abcdef0-9]{32})\b/},{token:"invalid.sfz",regex:/(?!=[abcdef0-9]{32}).*/}],"#string_normal-invert":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(normal|invert)\b/},{token:"invalid.sfz",regex:/(?!=(?:normal|invert)).*/}],"#string_on-off":[{token:["keyword.operator.assignment.sfz","string.unquoted.sfz"],regex:/(=)(true|false|on|off|0|1)\b/},{token:"invalid.sfz",regex:/(?!=(?:true|false|on|off|0|1)).*/}],"#string_note":[{token:["keyword.operator.assignment.sfz","string.note.sfz"],regex:/(=)([cdefgabCDEFGAB]\#?(?:-1|[0-9]))\b/},{token:"invalid.sfz",regex:/(?!=[cdefgabCDEFGAB]\#?(?:-1|[0-9])).*/}],"#string_any_continuous":[{token:["keyword.operator.assignment.sfz","string.note.sfz"],regex:/(=)([^\s]+)\b/},{token:"invalid.sfz",regex:/(?!=[^\s]+).*/}]},this.normalizeRules()};r.metaData={$schema:"https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",name:"SFZ",scopeName:"source.sfz"},n.inherits(r,o),t.Q=r},434:(e,t,n)=>{"use strict";n.r(t),n.d(t,{directoryOpen:()=>s,directoryOpenLegacy:()=>v,directoryOpenModern:()=>m,fileOpen:()=>a,fileOpenLegacy:()=>_,fileOpenModern:()=>u,fileSave:()=>l,fileSaveLegacy:()=>w,fileSaveModern:()=>b,supported:()=>o});const o=(()=>{if("undefined"==typeof self)return!1;if("top"in self&&self!==top)try{top}catch(e){return!1}return"showOpenFilePicker"in self})(),r=o?Promise.resolve().then((function(){return p})):Promise.resolve().then((function(){return x}));async function a(...e){return(await r).default(...e)}const i=o?Promise.resolve().then((function(){return h})):Promise.resolve().then((function(){return k}));async function s(...e){return(await i).default(...e)}const c=o?Promise.resolve().then((function(){return y})):Promise.resolve().then((function(){return z}));async function l(...e){return(await c).default(...e)}const f=async e=>{const t=await e.getFile();return t.handle=e,t};var u=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach(((e,n)=>{t[n]={description:e.description||"Files",accept:{}},e.mimeTypes?e.mimeTypes.map((o=>{t[n].accept[o]=e.extensions||[]})):t[n].accept["*/*"]=e.extensions||[]}));const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),o=await Promise.all(n.map(f));return e[0].multiple?o:o[0]},p={__proto__:null,default:u};function d(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return d=function(e){this.s=e,this.n=e.next},d.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new d(e)}const g=async(e,t,n=e.name,o)=>{const r=[],a=[];var i,s=!1,c=!1;try{for(var l,f=function(e){var t,n,o,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,o=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(o&&null!=(t=e[o]))return new d(t.call(e));n="@@asyncIterator",o="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());s=!(l=await f.next()).done;s=!1){const i=l.value,s=`${n}/${i.name}`;"file"===i.kind?a.push(i.getFile().then((t=>(t.directoryHandle=e,t.handle=i,Object.defineProperty(t,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>s}))))):"directory"!==i.kind||!t||o&&o(i)||r.push(g(i,t,s,o))}}catch(e){c=!0,i=e}finally{try{s&&null!=f.return&&await f.return()}finally{if(c)throw i}}return[...(await Promise.all(r)).flat(),...await Promise.all(a)]};var m=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:g(t,e.recursive,void 0,e.skipDirectory)},h={__proto__:null,default:m},b=async(e,t=[{}],n=null,o=!1,r=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const a=[];let i=null;if(e instanceof Blob&&e.type?i=e.type:e.headers&&e.headers.get("content-type")&&(i=e.headers.get("content-type")),t.forEach(((e,t)=>{a[t]={description:e.description||"Files",accept:{}},e.mimeTypes?(0===t&&i&&e.mimeTypes.push(i),e.mimeTypes.map((n=>{a[t].accept[n]=e.extensions||[]}))):i?a[t].accept[i]=e.extensions||[]:a[t].accept["*/*"]=e.extensions||[]})),n)try{await n.getFile()}catch(e){if(n=null,o)throw e}const s=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:a,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&r&&r(s);const c=await s.createWritable();if("stream"in e){const t=e.stream();return await t.pipeTo(c),s}return"body"in e?(await e.body.pipeTo(c),s):(await c.write(await e),await c.close(),s)},y={__proto__:null,default:b},_=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise(((t,n)=>{const o=document.createElement("input");o.type="file";const r=[...e.map((e=>e.mimeTypes||[])),...e.map((e=>e.extensions||[]))].join();o.multiple=e[0].multiple||!1,o.accept=r||"",o.style.display="none",document.body.append(o);const a=e=>{"function"==typeof i&&i(),t(e)},i=e[0].legacySetup&&e[0].legacySetup(a,(()=>i(n)),o),s=()=>{window.removeEventListener("focus",s),o.remove()};o.addEventListener("click",(()=>{window.addEventListener("focus",s)})),o.addEventListener("change",(()=>{window.removeEventListener("focus",s),o.remove(),a(o.multiple?Array.from(o.files):o.files[0])})),"showPicker"in HTMLInputElement.prototype?o.showPicker():o.click()}))),x={__proto__:null,default:_},v=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise(((t,n)=>{const o=document.createElement("input");o.type="file",o.webkitdirectory=!0;const r=e=>{"function"==typeof a&&a(),t(e)},a=e[0].legacySetup&&e[0].legacySetup(r,(()=>a(n)),o);o.addEventListener("change",(()=>{let t=Array.from(o.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(t=t.filter((t=>t.webkitRelativePath.split("/").every((t=>!e[0].skipDirectory({name:t,kind:"directory"})))))):t=t.filter((e=>2===e.webkitRelativePath.split("/").length)),r(t)})),"showPicker"in HTMLInputElement.prototype?o.showPicker():o.click()}))),k={__proto__:null,default:v},w=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let o=e;"body"in e&&(o=await async function(e,t){const n=e.getReader(),o=new ReadableStream({start:e=>async function t(){return n.read().then((({done:n,value:o})=>{if(!n)return e.enqueue(o),t();e.close()}))}()}),r=new Response(o),a=await r.blob();return n.releaseLock(),new Blob([a],{type:t})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await o);const r=()=>{"function"==typeof a&&a()},a=t.legacySetup&&t.legacySetup(r,(()=>a()),n);return n.addEventListener("click",(()=>{setTimeout((()=>URL.revokeObjectURL(n.href)),3e4),r()})),n.click(),null},z={__proto__:null,default:w}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return(()=>{"use strict";var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.Player=e.Interface=e.Editor=void 0;const t=n(82);e.Editor=t.default;const r=n(802);e.Interface=r.default;const a=n(920);e.Player=a.default})(),o})()));
//# sourceMappingURL=sfz.min.js.map